{"version":3,"sources":["utils/array-extensions.js","actions/navigation.js","actions/auth.js","utils/auth.js","reducers/navigation.js","utils/localStorage.js","reducers/auth.js","actions/cache.js","actions/your-stories.js","actions/story.js","actions/stories.js","reducers/cache.js","actions/navbar.js","reducers/navbar.js","actions/editor.js","actions/generic.js","constants/editor.js","reducers/editor.js","reducers/your-stories.js","reducers/story.js","reducers/stories.js","reducers/generic.js","actions/mock.js","reducers/index.js","middleware.js","store.js","constants/generic.js","sagas/api.js","utils/api.js","constants/api.js","sagas/generic.js","sagas/auth.js","sagas/editor.js","sagas/your-stories.js","sagas/story.js","sagas/index.js","utils/generic.js","components/logo.js","components/navbar.js","validators/forms.js","utils/forms.js","components/auth/text-field.js","components/snackbar.js","components/page-wrapper.js","components/auth/auth-form.js","components/auth/login.js","components/auth/register.js","components/stories-container.js","components/story-card-container.js","components/tag.js","components/stories/story-card.js","utils/time.js","components/stories/index.js","components/editor/effects-menu.js","components/editor/title.js","components/editor/save.js","components/editor/publish.js","components/editor/share.js","components/editor/mark.js","components/editor/node.js","components/editor/editor.js","components/editor/link-dialog.js","components/editor/tags-dialog.js","components/editor/share-dialog.js","components/content-container.js","components/editor/index.js","components/your-stories/story-card.js","components/your-stories/index.js","components/story/index.js","constants/navigation.js","layouts/main.js","App.js","registerServiceWorker.js","index.js"],"names":["extensions","this","length","undefined","property","map","el","method","_len","arguments","args","Array","_key","some","apply","_len2","_key2","every","_len3","_key3","_len4","_key4","find","_len5","_key5","reduce","acc","includes","concat","Object","toConsumableArray","slice","item","index","indexOf","last_","other","_","isEqual","sort","condition","prop","orderBy","uniq","element","oldElement","newElement","filter","v","array_extensions_i","array_extensions_ref3","array_extensions_ref2","slicedToArray","name","func","prototype","to","createAction","toStory","submitLogin","submitRegister","receiveAuthData","unauthorizeUser","loggedIn","expirationTime","localStorage","getItem","Date","getTime","parseInt","forward","state","page","reducers_navigation","_createReducer","createReducer","defineProperty","a","storyId","objectSpread","process","REACT_APP_MOCK","takeIfExists","key","type","String","Number","parseFloat","JSON","parse","auth","_ref","token","tokenExpirationTime","id","updateState","saveCache","removeStateReceivedFrom","selectTab","remove","edit","receiveStoriesForTab","clear","receiveStory","toggleLike","receiveStories","changeStateReceived","value","stateReceived","cache","newState","projectId","pageState","clearYourStories","login","register","editor","yourStories","story","stories","toggleDropdown","navbar","dropdownAnchor","dropdownOpen","changeTitle","toggleEffect","save","changeContent","startRequest","successfulSave","successfulCreation","changeLink","exitLinkPrompt","submitLink","toggleTagsMenu","editTag","submitTag","deleteTag","publish","receiveStoryForEdit","updateStory","toggleShareDialog","share","changeUserToShareName","startApp","enterPage","exitPage","moveMouse","changePageSize","tick","toggleSnackbar","SAVE_PERIOD","MARKS","BOLD","ITALIC","CODE","BLOCKS","LINK","HEADING_ONE","HEADING_TWO","NUMBERED_LIST","BULLETED_LIST","QUOTE","IMAGE","allStories","drafts","published","shared","s","flatten_","withoutUndef_","getDefaultState","title","content","Value","fromJSON","document","nodes","object","lastSave","now","lastEdit","changesSaved","linkPrompt","link","tags","tagsMenuOpen","shareDialogOpen","userToShareName","editingTag","saving","owner","updateLastEdit","oldState","sameContent","stringify","sameTags","sameAs_","sameTitle","allTrue_","willUpdateLastEdit","payload","unwrapLink","change","unwrapInline","wrapLink","href","wrapInline","data","insertImage","src","insertBlock","reducers_editor","hasBlock","blocks","node","isList","inlines","inline","hasLink","call","selection","isExpanded","values","toggleMark","isType","block","getClosest","parent","setBlocks","unwrapBlock","wrapBlock","isActive","err","console","info","uniq_","tag","without_","_ref2","lastEditTime","your_stories","tab","reducers_story","liked","likesNumber","ownerUsername","ownerId","publishTime","titile","reducers_stories","generic","width","height","pageWidth","pageHeight","mouseX","mouseY","snackbarMessage","window","innerWidth","innerHeight","receiveMockState","form","formReducer","getNewReducer","combineReducers","entries","navigation","reducer","sagaMiddleware","createSagaMiddleware","middleware","store","next","action","getType","prevState","getState","result","nextState","setItem","email","createStore","composeWithDevTools","applyMiddleware","TICK","callWith401Handle","_args","regenerator_default","wrap","_context","prev","abrupt","sent","t0","status","put","stop","_marked","RequestError","message","classCallCheck","headers","Content-Type","Authorization","makePostOptions","mode","body","request","url","options","fetch","then","response","json","get","post","patch","makePatchOptions","del","BACKEND","AUTH","LOGIN","REGISTER","STORIES","CREATE_STORY","DELETE_STORY","UPDATE_STORY","PUBLISH_STORY","USER_STORIES","userId","STORY_DETAIL","DRAFTS","SHARED","TOGGLE_LIKE","SHARE","listenNotifications","enters","mark","_context2","_context3","pageName","entersFunc","_context4","select","generic_marked","connection","attempt","connected","getEventChannel","channel","notificationType","_message","_ref3","_context5","signalR","withUrl","accessTokenFactory","build","start","delay","eventChannel","emit","on","off","take","username","toLowerCase","storyTitle","_marked2","_marked3","ticking","_context7","_context6","tickAction","delegateYield","history","pushState","spawn","_marked4","exits","_context8","clearEditor","_context9","_context10","_ref5","exitsFunc","_context11","_marked5","_ref6","_ref7","_ref7$editor","_context12","_marked6","authSaga","thanGoTo","_callee","_ref$payload","reject","authData","SubmissionError","storyUpdatePayload","_ref$editor","toJSON","editor_marked","_storyId","editor_marked2","_ref4","_ref4$editor","editor_marked3","_ref5$editor","editor_marked4","endpoint","actionPayload","usersDrafts","your_stories_marked","your_stories_marked2","_ref5$yourStories","your_stories_marked3","story_marked","saga","relations","_i","actions","sagas","_arr","_i2","actionName","_saga","genericActions","genericSagas","authActions","authSagas","editorActions","editorSagas","yourStoriesActions","yourStoriesSagas","storyActions","storySagas","takeLatest","sagas_marked","connectTo","mapStateToProps","Container","connect","dispatch","bindActionCreators","switchCase","curry","obj","path","setWith","clone","cases","defaultCase","noPropogation","e","stopPropagation","Logo","styled","h1","_templateObject","props","clickable","logo","onClick","react_default","createElement","Boolean","StyledToolbar","Toolbar","navbar_templateObject","itemHandler","index_es","position","aria-owns","aria-haspopup","currentTarget","color","icons_index_es","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","open","onClose","EMAIL_REGEX","minLength","min","required","minLength6","minLenght4","lengthLessThan40","limit","str","lengthLessThan","test","submitAsyncValidation","handleSubmit","enabledSubmit","onSubmit","preventDefault","Promise","resolve","isValid","formName","isFormValid","syncErrors","pristine","input","label","_ref$meta","meta","active","error","warning","custom","objectWithoutProperties","showError","assign","helperText","text_field_templateObject","autoHideDuration","onExited","ContentProps","aria-describedby","aria-label","Close_default","Loading","div","page_wrapper_templateObject","PageWrapper","_this$props","children","keyMap","handlers","_this$props$documentT","documentTitle","style","react_document_title_default","isEmpty","snackbar","react_hotkeys_index_es","focused","CircularProgress_default","React","Component","Form","auth_form_templateObject","Paper","_templateObject2","SubmitButton","Button","_templateObject3","BottomText","_templateObject4","auth_form","submitText","onBottomTextClick","bottomText","fields","page_wrapper","display","justifyContent","alignItems","flexDirection","auth_form_Container","variant","disabled","size","reduxForm","Field","component","TextField","validate","StoriesContainer","stories_container_templateObject","StyledCard","Card","story_card_container_templateObject","components_tag","chipProps","esm_extends","margin","TagsContainer","story_card_templateObject","story_card","dateText","story_card_container","marginBottom","fontSize","timestampForHuman","timestamp","DateTime","fromMillis","toLocaleString","month","day","stories_container","sortBy","reverse","number","date","effects_menu_templateObject","Effect","MenuItem","effects_menu_templateObject2","items","faBold","faItalic","faCode","faLink","faImage","faHeading","faListOl","faListUl","faQuoteRight","icon","effect","selected","activeMarks","react_fontawesome_index_es","effects_menu_Container","title_templateObject","title_Container","onChange","target","Code","code","mark_templateObject","lime","_switchCase","attributes","Quote","blockquote","node_templateObject","HeadingOne","node_templateObject2","HeadingTwo","h2","node_templateObject3","BulletedList","ul","node_templateObject4","NumberedList","ol","_templateObject5","Image","img","_templateObject6","purple","editor_node","isFocused","schema","last","normalize","paragraph","Block","create","insertNodeByKey","image","isVoid","slate_react_es","paddingTop","autoFocus","placeholder","renderNode","Node","renderMark","Mark","Dialog_default","aria-labelledby","DialogTitle_default","DialogContent_default","TextField_default","minWidth","fullWidth","DialogActions_default","Button_default","InputLine","tags_dialog_templateObject","ChipsContainer","tags_dialog_templateObject2","onDelete","content_container_templateObject","ContainerInner","content_container_templateObject2","content_container","content_container_Container","TopLine","editor_templateObject","Right","editor_templateObject2","Space","editor_templateObject3","padding","components_editor_save","components_editor_share","components_editor_publish","editor_title","editor_editor","effects_menu","link_dialog","tags_dialog","share_dialog","your_stories_story_card","onEdit","UsernameLine","your_stories_templateObject","tabs","renderStories","dateValue","Info","story_templateObject","Chips","story_templateObject2","Likes","story_templateObject3","LikesNumber","p","story_templateObject4","gutterBottom","readOnly","PAGES_WITH_NAVBAR","Layout","main_templateObject","MainLayout","popstate","Page","pages","components_navbar","addEventListener","clientX","clientY","App","es","main","run","__webpack_require__","bind","module","MOCK_STATE","isLocalhost","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","catch","ReactDOM","render","src_App","getElementById","URL","origin","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.05e9c7b8.chunk.js","sourcesContent":["import _ from 'lodash'\r\n\r\n/*eslint no-extend-native: */\r\nconst extensions = [\r\n  [\r\n    'last_',\r\n    function() {\r\n      return this.length > 0 ? this[this.length - 1] : undefined\r\n    }\r\n  ],\r\n  [\r\n    'take_',\r\n    function(property) {\r\n      return this.map(el => el[property])\r\n    }\r\n  ],\r\n  [\r\n    'some_',\r\n    function(method, ...args) {\r\n      return this.some(el => el[method](...args))\r\n    }\r\n  ],\r\n  [\r\n    'every_',\r\n    function(method, ...args) {\r\n      return this.every(el => el[method](...args))\r\n    }\r\n  ],\r\n  [\r\n    'map_',\r\n    function(method, ...args) {\r\n      return this.map(el => el[method](...args))\r\n    }\r\n  ],\r\n  [\r\n    'find_',\r\n    function(method, ...args) {\r\n      return this.find(el => el[method](...args))\r\n    }\r\n  ],\r\n  [\r\n    'without_',\r\n    function(...args) {\r\n      return this.reduce(\r\n        (acc, el) => (args.includes(el) ? acc : [...acc, el]),\r\n        []\r\n      )\r\n    }\r\n  ],\r\n  [\r\n    'flatten_',\r\n    function() {\r\n      return this.reduce((acc, el) => [...acc, ...el], [])\r\n    }\r\n  ],\r\n  [\r\n    'sum_',\r\n    function() {\r\n      return this.reduce((acc, el) => acc + el, 0)\r\n    }\r\n  ],\r\n  [\r\n    'empty_',\r\n    function() {\r\n      return this.length === 0\r\n    }\r\n  ],\r\n  [\r\n    'withoutLast_',\r\n    function() {\r\n      return this.slice(0, this.length - 1)\r\n    }\r\n  ],\r\n  [\r\n    'previous_',\r\n    function(item) {\r\n      if (this.length < 2) return\r\n\r\n      const index = this.indexOf(item)\r\n      if (index < 0) return\r\n\r\n      return index === 0 ? this.last_() : this[index - 1]\r\n    }\r\n  ],\r\n  [\r\n    'next_',\r\n    function(item) {\r\n      if (this.length < 2) return\r\n\r\n      const index = this.indexOf(item)\r\n      if (index < 0) return\r\n\r\n      return index === this.length - 1 ? this[0] : this[index + 1]\r\n    }\r\n  ],\r\n  [\r\n    'sameAs_',\r\n    function(other) {\r\n      return _.isEqual(this.sort(), other.sort())\r\n    }\r\n  ],\r\n  [\r\n    'pushIf_',\r\n    function(condition, item) {\r\n      return condition ? [...this, item] : this\r\n    }\r\n  ],\r\n  [\r\n    'orderBy_',\r\n    function(prop) {\r\n      return _.orderBy(this, [prop], ['ask'])\r\n    }\r\n  ],\r\n  [\r\n    'uniq_',\r\n    function() {\r\n      return _.uniq(this)\r\n    }\r\n  ],\r\n  [\r\n    'reverse_',\r\n    function() {\r\n      return this.reduce((acc, item) => [item, ...acc], [])\r\n    }\r\n  ],\r\n  [\r\n    'withoutOnce_',\r\n    function(element) {\r\n      const index = this.indexOf(element)\r\n      return [...this.slice(0, index), ...this.slice(index + 1)]\r\n    }\r\n  ],\r\n  [\r\n    'replace_',\r\n    function(oldElement, newElement) {\r\n      return this.map(\r\n        element => (element === oldElement ? newElement : element)\r\n      )\r\n    }\r\n  ],\r\n  [\r\n    'replaceAtIndex_',\r\n    function(index, element) {\r\n      return [...this.slice(0, index), element, ...this.slice(index + 1)]\r\n    }\r\n  ],\r\n  [\r\n    'removeAtIndex_',\r\n    function(index) {\r\n      return [...this.slice(0, index), ...this.slice(index + 1)]\r\n    }\r\n  ],\r\n  [\r\n    'withoutUndef_',\r\n    function() {\r\n      return this.filter(el => el !== undefined)\r\n    }\r\n  ],\r\n  [\r\n    'sameAs_',\r\n    function(other) {\r\n      return _.isEqual(this.sort(), other.sort())\r\n    }\r\n  ],\r\n  [\r\n    'allTrue_',\r\n    function() {\r\n      return this.every(v => v)\r\n    }\r\n  ]\r\n]\r\nfor (const [name, func] of extensions) {\r\n  Array.prototype[name] = func\r\n}\r\n\r\nexport default {}\r\n","import { createAction } from 'redux-act'\r\n\r\nexport const to = createAction()\r\nexport const toStory = createAction()\r\n","import { createAction } from 'redux-act'\r\n\r\nexport const submitLogin = createAction()\r\nexport const submitRegister = createAction()\r\n\r\nexport const receiveAuthData = createAction()\r\nexport const unauthorizeUser = createAction()\r\n","/* global localStorage:true */\r\n\r\nexport const loggedIn = () => {\r\n  const expirationTime = localStorage.getItem('tokenExpirationTime')\r\n  return new Date().getTime() / 1000 < parseInt(expirationTime, 10)\r\n}\r\n\r\nexport const unlogin = () => {\r\n  localStorage.removeItem('token')\r\n  localStorage.removeItem('tokenExpirationTime')\r\n}\r\n","import { createReducer } from 'redux-act'\r\nimport * as a from '../actions/navigation'\r\n\r\nimport { unauthorizeUser } from '../actions/auth'\r\nimport { loggedIn } from '../utils/auth'\r\n\r\nconst getDefaultState = page => ({\r\n  page,\r\n  storyId: undefined\r\n})\r\n\r\nconst forward = (state, page) => ({ state, page })\r\n\r\nexport default _ =>\r\n  createReducer(\r\n    {\r\n      [a.to]: forward,\r\n      [a.toStory]: (state, storyId) => ({ ...state, page: 'story', storyId }),\r\n      [unauthorizeUser]: state => forward(state, 'login'),\r\n    },\r\n    getDefaultState(process.env.REACT_APP_MOCK\r\n        ? undefined\r\n        : loggedIn() ? 'stories' : 'login'\r\n    )\r\n  )\r\n","export const takeIfExists = (key, type = String) => {\r\n  const item = localStorage.getItem(key)\r\n  if (item) {\r\n    return type === Number\r\n      ? Number.parseFloat(item)\r\n      : type === Object ? JSON.parse(item) : item\r\n  }\r\n}\r\n","import { createReducer } from 'redux-act'\r\n\r\nimport * as a from '../actions/auth'\r\nimport { takeIfExists } from '../utils/localStorage'\r\n\r\nconst getDefaultState = _ => ({\r\n  token: takeIfExists('token'),\r\n  id: takeIfExists('id'),\r\n  tokenExpirationTime: takeIfExists('tokenExpirationTime', Number),\r\n})\r\n\r\nexport default _ =>\r\n  createReducer(\r\n    {\r\n      [a.receiveAuthData]: (state, { token, tokenExpirationTime, id }) => ({\r\n        ...state,\r\n        id,\r\n        token,\r\n        tokenExpirationTime\r\n      }),\r\n      [a.unauthorizeUser]: () => ({})\r\n    },\r\n    getDefaultState()\r\n  )\r\n","import { createAction } from 'redux-act'\r\n\r\nexport const updateState = createAction()\r\n\r\nexport const saveCache = createAction()\r\n\r\nexport const removeStateReceivedFrom = createAction()\r\n","import { createAction } from 'redux-act'\n\nexport const selectTab = createAction()\nexport const remove = createAction()\nexport const edit = createAction()\nexport const receiveStoriesForTab = createAction()\nexport const clear = createAction()","import { createAction } from 'redux-act'\n\nexport const receiveStory = createAction()\nexport const toggleLike = createAction()\n","import { createAction } from 'redux-act'\n\nexport const receiveStories = createAction()","import { createReducer } from 'redux-act'\n\nimport * as a from '../actions/cache'\nimport { receiveStoriesForTab, clear as clearYourStories } from '../actions/your-stories'\nimport { receiveStory } from '../actions/story';\nimport { receiveStories } from '../actions/stories'\n\nexport const getDefaultState = _ => ({\n  stateReceived: {\n    login: true,\n    register: true,\n    editor: true,\n    yourStories: false,\n    story: false,\n    stories: false\n  }\n})\n\nconst changeStateReceived = (state, page, value) => ({\n  ...state,\n  stateReceived: {\n    ...state.stateReceived,\n    [page]: value\n  }\n})\n\n\nexport default _ =>\n  createReducer(\n    {\n      // only for sagas usage\n      [a.updateState]: (state, newState) => ({ ...state, ...newState }),\n      [a.saveCache]: (state, { page, projectId, pageState }) => ({\n        ...state,\n        stateReceived: {\n          ...state.stateReceived,\n          [page]: false\n        },\n        [page]: {\n          ...state[page],\n          [projectId]: pageState\n        },\n      }),\n      [a.removeStateReceivedFrom]: (state, page) => ({\n        ...state,\n        stateReceived: {\n          ...state.stateReceived,\n          [page]: false\n        }\n      }),\n      [receiveStoriesForTab]: state => changeStateReceived(state, 'yourStories', true),\n      [clearYourStories]: state => changeStateReceived(state, 'yourStories', false),\n      [receiveStory]: state => changeStateReceived(state, 'story', true),\n      [receiveStories]: state => changeStateReceived(state, 'stories', true)\n    },\n    getDefaultState()\n  )\n","import { createAction } from 'redux-act'\n\nexport const toggleDropdown = createAction()\n","import { createReducer } from 'redux-act'\nimport * as a from '../actions/navbar'\n\nconst getState = () => ({\n  dropdownOpen: false,\n  dropdownAnchor: undefined\n})\n\nexport default _ =>\n  createReducer(\n    {\n      [a.toggleDropdown]: (state, dropdownAnchor) => {\n        const dropdownOpen = !state.dropdownOpen\n        return {\n          ...state,\n          dropdownOpen,\n          dropdownAnchor: dropdownOpen ? dropdownAnchor : undefined\n        }\n      }\n    },\n    getState()\n  )","import { createAction } from 'redux-act'\n\nexport const changeTitle = createAction()\n\nexport const toggleEffect = createAction()\nexport const save = createAction()\nexport const changeContent = createAction()\nexport const startRequest = createAction()\nexport const successfulSave = createAction()\nexport const successfulCreation = createAction()\nexport const changeLink = createAction()\nexport const exitLinkPrompt = createAction()\nexport const submitLink = createAction()\n\nexport const toggleTagsMenu = createAction()\nexport const editTag = createAction()\nexport const submitTag = createAction()\nexport const deleteTag = createAction()\nexport const publish = createAction()\n\nexport const receiveStoryForEdit = createAction()\nexport const updateStory = createAction()\nexport const clear = createAction()\n\nexport const toggleShareDialog = createAction()\nexport const share = createAction()\nexport const changeUserToShareName = createAction()","import { createAction } from 'redux-act'\r\n\r\nexport const startApp = createAction()\r\nexport const enterPage = createAction()\r\nexport const exitPage = createAction()\r\nexport const moveMouse = createAction()\r\nexport const changePageSize = createAction()\r\nexport const tick = createAction()\r\nexport const toggleSnackbar = createAction()\r\n","export const MAX_TITLE_LENGTH = 60\nexport const SAVE_PERIOD = 4000\nexport const TAGS_LIMIT = 5\n\nexport const MARKS = {\n  BOLD: 'bold',\n  ITALIC: 'italic',\n  CODE: 'code'\n}\n\nexport const BLOCKS = {\n  LINK: 'link',\n  HEADING_ONE: 'heading-one',\n  HEADING_TWO: 'heading-two',\n  NUMBERED_LIST: 'numbered-list',\n  BULLETED_LIST: 'bulleted-list',\n  QUOTE: 'block-quote',\n  IMAGE: 'image'\n}","import { createReducer } from 'redux-act'\nimport { Value } from 'slate'\n\nimport * as a from '../actions/editor'\nimport { tick } from '../actions/generic'\nimport { MAX_TITLE_LENGTH, MARKS, BLOCKS } from '../constants/editor';\n\nexport const allStories = ({ drafts, published, shared }) => [drafts, published, shared ?  shared.map(s => s.drafts).flatten_() : undefined].withoutUndef_().flatten_()\n\nconst getDefaultState = () => ({\n  title: '',\n  content: Value.fromJSON({\n    document: {\n      nodes: [\n        {\n          object: 'block',\n          type: 'paragraph', \n        },\n      ],\n    },\n  }),\n  storyId: undefined,\n  lastSave: Date.now(),\n  lastEdit: undefined,\n  changesSaved: true,\n  linkPrompt: undefined,\n  link: '',\n  tags: [],\n  tagsMenuOpen: false,\n  shareDialogOpen: false,\n  userToShareName: '',\n  editingTag: '',\n  saving: false,\n  owner: true\n})\n\nconst updateLastEdit = (oldState, newState) => {\n  const sameContent = JSON.stringify(oldState.content) === JSON.stringify(newState.content)\n  const sameTags = oldState.tags.sameAs_(newState.tags)\n  const sameTitle = oldState.title === newState.title\n  return {\n    ...newState,\n    lastEdit: [sameContent, sameTags, sameTitle].allTrue_() ? oldState.lastEdit : Date.now()\n  }\n}\n\nconst willUpdateLastEdit = func => (oldState, payload) => {\n  const newState = func(oldState, payload)\n  return updateLastEdit(oldState, newState)\n}\n\nconst hasLink = value => value.inlines.some(inline => inline.type === BLOCKS.LINK)\nconst unwrapLink = change => change.unwrapInline(BLOCKS.LINK)\nconst wrapLink = (change, href) => change.wrapInline({\n  type: BLOCKS.LINK,\n  data: { href }\n})\n\nconst insertImage = (change, src) => change.insertBlock({\n  type: BLOCKS.IMAGE,\n  data: { src }\n})\n\nexport default () => createReducer(\n  {\n    [a.changeTitle]: willUpdateLastEdit((state, title) => ({\n      ...state,\n      title: title.slice(0, MAX_TITLE_LENGTH),\n    })),\n    [a.changeContent]: willUpdateLastEdit((state, content) => ({\n      ...state,\n      content\n    })),\n    [a.save]: (state) => ({\n      ...state,\n      saving: true\n    }),\n    [a.successfulSave]: (state) => ({\n      ...state,\n      lastSave: Date.now(),\n      saving: false\n    }),\n    [a.successfulCreation]: (state, storyId) => ({\n      ...state,\n      storyId,\n      saving: false\n    }),\n    [tick]: (state) => ({\n      ...state,\n      changesSaved: !state.lastEdit || state.lastSave > state.lastEdit\n    }),\n    [a.toggleEffect]: (state, type) => {\n      try {\n        const value = state.content\n        const change = value.change()\n        const { document } = value\n        const hasBlock = type => value.blocks.some(node => node.type === type)\n        const isList = hasBlock('list-item')\n\n        if (type === BLOCKS.LINK) {\n\n          if (hasLink(value)) {\n            change.call(unwrapLink)\n            return updateLastEdit(state, { ...state, content: change.value })\n          }\n          // no way to create link when nothing is selected\n          if (!value.selection.isExpanded) return state\n          return updateLastEdit(state, { ...state, content: change.value, linkPrompt: BLOCKS.LINK })\n        }\n        if (type === BLOCKS.IMAGE) {\n          return updateLastEdit(state, { ...state, content: change.value, linkPrompt: BLOCKS.IMAGE })\n        }\n        if (Object.values(MARKS).includes(type)) {\n          return updateLastEdit(\n            state,\n            { ...state, content: change.toggleMark(type).value }\n          )\n        } else {\n          if (!['bulleted-list', 'numbered-list'].includes(type)) {\n            const isActive = hasBlock(type)\n      \n            if (isList) {\n              change\n                .setBlocks(isActive ? 'paragraph' : type)\n                .unwrapBlock('bulleted-list')\n                .unwrapBlock('numbered-list')\n            } else {\n              change.setBlocks(isActive ? 'paragraph' : type)\n            }\n          } else {\n            // Handle the extra wrapping required for list buttons.\n            const isType = value.blocks.some(block => !!document.getClosest(block.key, parent => parent.type === type))\n      \n            if (isList && isType) {\n              change\n                .setBlocks('paragraph')\n                .unwrapBlock('bulleted-list')\n                .unwrapBlock('numbered-list')\n            } else if (isList) {\n              change\n                .unwrapBlock(\n                  type === 'bulleted-list' ? 'numbered-list' : 'bulleted-list'\n                )\n                .wrapBlock(type)\n            } else {\n              change.setBlocks('list-item').wrapBlock(type)\n            }\n          }\n      \n          return updateLastEdit(state, { ...state, content: change.value })\n        }\n      } catch(err) {\n        console.info('fail to execute effect')\n        return state\n      }\n    },\n    [a.exitLinkPrompt]: state => ({ ...state, linkPrompt: undefined, link: '' }),\n    [a.changeLink]: (state, link) => ({ ...state, link }),\n    [a.submitLink]: state => {\n      if (!state.link) return ({ ...state, linkPrompt: undefined })\n\n      const change = state.content.change()\n      change.call(state.linkPrompt === BLOCKS.LINK ? wrapLink : insertImage, state.link)\n      return updateLastEdit(state, { ...state, content: change.value, linkPrompt: undefined, link: '', })\n    },\n    [a.toggleTagsMenu]: state => ({\n      ...state,\n      tagsMenuOpen: !state.tagsMenuOpen\n    }),\n    [a.editTag]: (state, editingTag) => ({ \n      ...state,\n      editingTag\n    }),\n    [a.submitTag]: willUpdateLastEdit(state => ({\n      ...state,\n      tags: (state.editingTag ? [ ...state.tags, state.editingTag] : state.tags).uniq_(),\n      editingTag: '',\n    })),\n    [a.deleteTag]: willUpdateLastEdit((state, tag) => ({\n      ...state,\n      tags: state.tags.without_(tag)\n    })),\n    [a.receiveStoryForEdit]: (state, story) => ({\n      ...getDefaultState(),\n      storyId: story.id,\n      title: story.title,\n      content: Value.fromJSON(JSON.parse(story.content)),\n      tags: story.tags,\n      lastSave: Date.now(),\n      owner: story.owner\n    }),\n    [a.updateStory]: (state, { title, tags, lastEditTime, content }) => ({\n      ...state,\n      title,\n      tags,\n      lastSave: lastEditTime * 1000,\n      content: Value.fromJSON(JSON.parse(content)),\n    }),\n    [a.clear]: () => getDefaultState(),\n    [a.toggleShareDialog]: state => ({\n      ...state,\n      shareDialogOpen: !state.shareDialogOpen\n    }),\n    [a.share]: state => ({\n      ...state,\n      shareDialogOpen: false\n    }),\n    [a.changeUserToShareName]: (state, userToShareName) => ({\n      ...state,\n      userToShareName\n    })\n  },\n  getDefaultState()\n)","import { createReducer } from 'redux-act'\nimport * as a from '../actions/your-stories'\n\nconst getState = () => ({\n  tab: 'drafts',\n  drafts: undefined,\n  published: undefined,\n  shared: undefined\n})\n\nexport default _ =>\n  createReducer(\n    {\n      [a.selectTab]: (state, tab) => ({ ...state, tab }),\n      [a.remove]: (state, storyId) => ({\n        ...state,\n        [state.tab]: state[state.tab].filter(story => story.id !== storyId)\n      }),\n      [a.receiveStoriesForTab]: (state, { stories, tab }) => ({ \n        ...state,\n        [tab]: stories\n      }),\n      [a.clear]: () => getState()\n    },\n    getState()\n  )","import { createReducer } from 'redux-act'\nimport { Value } from 'slate'\n\nimport * as a from '../actions/story'\n\nconst getDefaultState = () => ({\n  storyId: undefined,\n  ownerUsername: undefined,\n  ownerId: undefined,\n  publishTime: undefined,\n  titile: undefined,\n  content: undefined,\n  tags: [],\n  likesNumber: 0,\n  liked: false,\n})\n \nexport default _ =>\n  createReducer(\n    {\n      [a.receiveStory]: (state, story) => ({\n        ...state,\n        ...story,\n        storyId: story.id,\n        content: Value.fromJSON(JSON.parse(story.content)),\n      }),\n      [a.toggleLike]: (state) => ({\n        ...state,\n        liked: !state.liked,\n        likesNumber: state.liked ? state.likesNumber - 1 : state.likesNumber + 1\n      })\n    },\n    getDefaultState()\n  )\n","import { createReducer } from 'redux-act'\nimport * as a from '../actions/stories'\n\nconst getDefaultState = page => ({\n  stories: []\n})\n\nexport default () => createReducer({\n  [a.receiveStories]: (state, stories) => ({ ...state, stories })\n}, getDefaultState())","import { createReducer } from 'redux-act'\nimport * as a from '../actions/generic'\n\nconst getDefaultState = () => ({\n  pageWidth: window.innerWidth,\n  pageHeight: window.innerHeight,\n  mouseX: 0,\n  mouseY: 0,\n  snackbarMessage: ''\n})\n\nexport default () =>\n  createReducer(\n    {\n      [a.changePageSize]: (state, { width, height }) => ({\n        ...state,\n        pageWidth: width,\n        pageHeight: height\n      }),\n      [a.moveMouse]: (state, { mouseX, mouseY }) => ({\n        ...state,\n        mouseX,\n        mouseY\n      }),\n      [a.toggleSnackbar]: (state, snackbarMessage) => ({ ...state, snackbarMessage }),\n    },\n    getDefaultState()\n  )\n","import { createAction } from 'redux-act'\n\nexport const receiveMockState = createAction()\n","import { combineReducers, createStore } from 'redux'\nimport { reducer as formReducer } from 'redux-form'\n\nimport navigation from './navigation'\nimport auth from './auth'\nimport cache from './cache'\nimport navbar from './navbar'\nimport editor from './editor'\nimport yourStories from './your-stories'\nimport story from './story'\nimport stories from './stories'\nimport generic from './generic'\n\nimport { unauthorizeUser } from '../actions/auth'\nimport { receiveMockState } from '../actions/mock'\n\nconst form = () => formReducer\n\nconst getNewReducer = _ =>\n  combineReducers(\n    Object.entries({\n      navigation,\n      auth,\n      cache,\n      form,\n      navbar,\n      editor,\n      yourStories,\n      story,\n      stories,\n      generic\n    }).reduce(\n      (acc, [key, value]) => ({\n        ...acc,\n        [key]: value()\n      }),\n      {}\n    )\n  )\n\nconst reducer = getNewReducer()\n\nexport default (state, action) => {\n  if (action.type === unauthorizeUser.getType()) {\n    return reducer(createStore(getNewReducer()).getState())\n  }\n\n  if (action.type === receiveMockState.getType()) {\n    return reducer(action.payload)\n  }\n\n  return reducer(state, action)\n}\n","import createSagaMiddleware from 'redux-saga'\n\nimport { unauthorizeUser } from './actions/auth'\n\nexport const sagaMiddleware = createSagaMiddleware()\n\nconst localStorageMiddleware = store => next => action => {\n  if (action.type === unauthorizeUser.getType()) {\n    localStorage.clear()\n  }\n\n  const prevState = store.getState()\n  const result = next(action)\n  const nextState = store.getState()\n\n  if (prevState.auth.token !== nextState.auth.token && nextState.auth.token) {\n    localStorage.setItem('token', nextState.auth.token)\n    localStorage.setItem(\n      'tokenExpirationTime',\n      nextState.auth.tokenExpirationTime\n    )\n    localStorage.setItem('id', nextState.auth.id)\n    localStorage.setItem('email', nextState.auth.email)\n  }\n  return result\n}\n\nexport default [sagaMiddleware, localStorageMiddleware]\n","import { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nimport reducer from './reducers'\nimport middleware from './middleware'\n\nexport default createStore(\n  reducer,\n  composeWithDevTools(applyMiddleware(...middleware))\n)\n","export const TICK = 200","import { call, put } from 'redux-saga/effects'\r\nimport { unauthorizeUser } from '../actions/auth'\r\n\r\nexport function* callWith401Handle(...args) {\r\n  if (process.env.REACT_APP_MOCK) return\r\n  try {\r\n    const data = yield call(...args)\r\n    return data\r\n  } catch (err) {\r\n    console.info('request with error: ', err)\r\n    if (err.status === 401) {\r\n      yield put(unauthorizeUser())\r\n    } else {\r\n      throw err\r\n    }\r\n  }\r\n}\r\n","class RequestError {\r\n  constructor(status, message) {\r\n    this.status = status\r\n    this.message = message\r\n  }\r\n}\r\n\r\nexport const headers = () => ({\r\n  'Content-Type': 'application/json',\r\n  Authorization: `Bearer ${localStorage.getItem('token')}`\r\n})\r\n\r\nexport const makePostOptions = data => ({\r\n  method: 'POST',\r\n  mode: 'cors',\r\n  headers: headers(),\r\n  body: JSON.stringify(data)\r\n})\r\n\r\nexport const makePatchOptions = data => ({\r\n  ...makePostOptions(data),\r\n  method: 'PATCH'\r\n})\r\n\r\nexport const getOptions = () => ({\r\n  method: 'GET',\r\n  headers: headers()\r\n})\r\n\r\nexport const deleteOptions = () => ({\r\n  method: 'DELETE',\r\n  mode: 'cors',\r\n  headers: headers()\r\n})\r\n\r\nconst request = (url, options) =>\r\n  fetch(url, options).then(response => {\r\n    const { status } = response\r\n\r\n    if (status === 204) return {}\r\n    const json = response.json()\r\n    if (status >= 200 && status < 400) return json\r\n    return json.then(message => {\r\n      throw new RequestError(status, message)\r\n    })\r\n  })\r\n\r\nexport const plainGet = url =>\r\n  request(url, {\r\n    method: 'GET',\r\n    header: { 'Content-Type': 'application/json' }\r\n  })\r\nexport const plainPost = (url, data) =>\r\n  request(url, {\r\n    method: 'POST',\r\n    body: JSON.stringify(data)\r\n  })\r\nexport const get = url => request(url, getOptions())\r\nexport const post = (url, data) => request(url, makePostOptions(data))\r\nexport const patch = (url, data) => request(url, makePatchOptions(data))\r\nexport const del = (url, id) => request(url + id, deleteOptions())\r\n","export const BACKEND = process.env.REACT_APP_MAIN_API_URL\r\n\r\nconst AUTH = `${BACKEND}auth/`\r\nexport const LOGIN = `${AUTH}login`\r\nexport const REGISTER = `${AUTH}register`\r\n\r\nexport const STORIES = `${BACKEND}stories/`\r\nexport const CREATE_STORY = STORIES\r\nexport const DELETE_STORY = STORIES\r\nexport const UPDATE_STORY = storyId => `${STORIES}${storyId}`\r\nexport const PUBLISH_STORY = storyId => `${STORIES}${storyId}/publish`\r\n\r\nexport const USER_STORIES = userId => `${STORIES}user/${userId}`\r\nexport const STORY_DETAIL = storyId => `${STORIES}${storyId}`\r\nexport const DRAFTS = `${STORIES}drafts`\r\nexport const SHARED = `${STORIES}shared`\r\nexport const TOGGLE_LIKE = storyId => `${STORIES}${storyId}/toggleLike`\r\nexport const SHARE = storyId => `${STORIES}${storyId}/share`\r\n\r\n","import { select, put, call, take, spawn } from 'redux-saga/effects'\nimport { delay, eventChannel } from 'redux-saga';\n\nimport { TICK } from '../constants/generic'\nimport { tick as tickAction, toggleSnackbar } from '../actions/generic';\nimport { SAVE_PERIOD } from '../constants/editor';\nimport { save, clear as clearEditor, updateStory } from '../actions/editor';\nimport { clear as clearYourStories } from '../actions/your-stories'\nimport { receiveStory } from '../actions/story'\nimport { receiveStories } from '../actions/stories'\nimport { selectTab } from '../actions/your-stories';\nimport { callWith401Handle } from './api'\nimport { get } from '../utils/api'\nimport { STORY_DETAIL, STORIES } from '../constants/api';\nimport { removeStateReceivedFrom } from '../actions/cache';\nimport * as signalR from '@aspnet/signalr'\n\n\nconst enters = {\n  yourStories: function*(state) {\n    yield put(selectTab(state.yourStories.tab))\n  },\n  story: function*(state) {\n    const storyId = state.navigation.storyId\n    const story = yield callWith401Handle(get, STORY_DETAIL(storyId))\n    yield put(receiveStory(story))\n  },\n  stories: function*(state) {\n    const { stories } = yield callWith401Handle(get, STORIES)\n    yield put(receiveStories(stories))\n  }\n}\n\nexport function* enterPage() {\n  const state = yield select()\n  const pageName = state.navigation.page\n  const entersFunc = enters[pageName]\n  if (entersFunc) yield entersFunc(state)\n}\n\nfunction* listenNotifications() {\n  const connection = new signalR.HubConnectionBuilder()\n    .withUrl(\"http://blogapi20190328025351.azurewebsites.net/notifications\", { accessTokenFactory: () => localStorage.token })\n    .build()\n    \n  let attempt = 0\n  let connected = false\n  while(attempt < 10 && !connected) {\n    attempt++\n    connected = true\n    try {\n      yield call(() => connection.start())\n      console.info('SignalR: successfully connected')\n    } catch(err) {\n      console.info(`SignalR: attempt ${attempt}: failed to connect`)\n      yield call(delay, 1000)\n      connected = false\n    }\n  }\n\n  if (connected) {\n    const getEventChannel = connection => eventChannel(emit => {\n      const handler = data => { emit(data) }\n      connection.on('notification', handler)\n      return () => { connection.off() }\n    })\n  \n    const channel = yield call(getEventChannel, connection)\n    while(true) {\n      const { notificationType, payload } = yield take(channel)\n      if (['LIKE', 'UNLIKE'].includes(notificationType)) {\n        const message = `${payload.username} ${notificationType.toLowerCase()}d \"${payload.storyTitle}\"`\n        yield put(toggleSnackbar(message))\n      } else if (notificationType === 'SHARE') {\n        const message = `${payload.username} invited you to edit his story: \"${payload.storyTitle}\"`\n        yield put(toggleSnackbar(message))\n      } else if (notificationType === 'STORY_EDIT') {\n        const { navigation, editor } = yield select()\n        if (navigation.page === 'editor' && editor.storyId === payload.id) {\n          yield put(updateStory(payload))\n        }\n      }\n    }\n  }\n}\n\nexport function* startApp() {\n  window.history.pushState({}, '', '')\n  \n  yield spawn(listenNotifications)\n\n  function* ticking() {\n    yield put(tickAction())\n    yield call(delay, TICK)\n    yield* ticking()\n  }\n  yield* ticking()\n}\n\nconst exits = {\n  editor: function* () {\n    yield put(clearEditor())\n  },\n  yourStories: function* () {\n    yield put(clearYourStories())\n  },\n  story: function* () {\n    yield put(removeStateReceivedFrom('story'))\n  }\n}\n\nexport function* exitPage({ payload }) {\n  const state = yield select()\n\n  const exitsFunc = exits[payload]\n  if (exitsFunc) yield exitsFunc(state)\n}\n\nexport function* tick() {\n  const { navigation: { page } } = yield select()\n  if (page === 'editor') {\n    const { editor: { lastSave, lastEdit, saving } } = yield select()\n    if (!saving && lastEdit && lastEdit > lastSave && Date.now() - lastSave > SAVE_PERIOD) {\n      yield put(save())\n    }\n  }\n}\n","import { put, call } from 'redux-saga/effects'\r\nimport { SubmissionError } from 'redux-form'\r\n\r\nimport { to } from '../actions/navigation'\r\nimport { receiveAuthData } from '../actions/auth'\r\nimport { LOGIN, REGISTER } from '../constants/api'\r\nimport { post } from '../utils/api'\r\nimport { startApp } from '../actions/generic'\r\n\r\nconst authSaga = (url, thanGoTo) =>\r\n  function*({ payload: { values, reject } }) {\r\n    try {\r\n      const authData = yield call(post, url, values)\r\n      yield put(receiveAuthData(authData))\r\n      yield put(startApp())\r\n      yield put(to(thanGoTo))\r\n    } catch ({ status, message }) {\r\n      yield call(reject, new SubmissionError(message))\r\n    }\r\n  }\r\n\r\nexport const submitLogin = authSaga(LOGIN, 'stories')\r\nexport const submitRegister = authSaga(REGISTER, 'stories')\r\n","import { put, select } from 'redux-saga/effects'\n\nimport { CREATE_STORY, UPDATE_STORY, PUBLISH_STORY, SHARE } from '../constants/api'\nimport { post, patch } from '../utils/api'\nimport { callWith401Handle } from './api'\nimport { successfulSave, successfulCreation } from \"../actions/editor\";\nimport { toStory } from '../actions/navigation'\n\nexport function* storyUpdatePayload() {\n  const { editor: { title, content, tags } } = yield select()\n  return {\n    title,\n    content: JSON.stringify(content.toJSON()),\n    tags\n  }\n}\n\nexport function* save() {\n  const { editor: { storyId } } = yield select()\n  const payload = yield storyUpdatePayload()\n  if (!storyId) {\n    \n    const { storyId } = yield callWith401Handle(post, CREATE_STORY, payload)\n    yield put(successfulCreation(storyId))\n  } else {\n    yield callWith401Handle(patch, UPDATE_STORY(storyId), payload)\n    yield put(successfulSave())\n  }\n}\n\nexport function* publish() {\n  const { editor: { changesSaved, storyId } } = yield select()\n  if (!changesSaved) {\n    yield save()\n  }\n  yield callWith401Handle(post, PUBLISH_STORY(storyId))\n  yield put(toStory(storyId))\n}\n\nexport function* share() {\n  const { editor: { userToShareName, storyId } } = yield select()\n  try {\n    yield callWith401Handle(post, SHARE(storyId), { username: userToShareName })\n  } catch(err) {\n    // to: for now simply print error in console\n    console.info('fail to share: ', err)\n  }\n}","import { select, put } from 'redux-saga/effects'\nimport { callWith401Handle } from './api'\nimport { DRAFTS, USER_STORIES, DELETE_STORY, SHARED } from '../constants/api'\nimport { get, del } from '../utils/api'\nimport { receiveStoriesForTab } from '../actions/your-stories';\nimport { receiveStoryForEdit } from '../actions/editor';\nimport { to } from '../actions/navigation'\nimport { allStories } from '../reducers/editor';\n\nexport function* selectTab({ payload }) {\n  const { yourStories, auth: { id } } = yield select()\n  if (yourStories[payload]) return\n  \n  const endpoint = payload === 'drafts' ? DRAFTS : payload === 'shared' ? SHARED : USER_STORIES(id)\n  const response = yield callWith401Handle(get, endpoint)\n  const actionPayload = { stories: payload === 'shared' ? response.usersDrafts : response.stories, tab: payload }\n  yield put(receiveStoriesForTab(actionPayload))\n}\n\nexport function* remove({ payload }) {\n  yield callWith401Handle(del, DELETE_STORY, payload)\n}\n\nexport function* edit({ payload }) {\n  const { yourStories: { drafts, published, shared, tab } } = yield select()\n\n  const story = allStories({ drafts, published, shared }).find(story => story.id === payload )\n  yield put(receiveStoryForEdit({ ...story, owner: tab !== 'shared' }))\n  yield put(to('editor'))\n}","import { select } from 'redux-saga/effects'\nimport { callWith401Handle } from './api'\nimport { TOGGLE_LIKE } from '../constants/api'\nimport { post } from '../utils/api'\n\nexport function* toggleLike() {\n  const { navigation: { storyId } } = yield select()\n  yield callWith401Handle(post, TOGGLE_LIKE(storyId))\n}","import { takeLatest } from 'redux-saga/effects'\r\n\r\nimport * as genericActions from '../actions/generic'\r\nimport * as genericSagas from './generic'\r\n\r\nimport * as authActions from '../actions/auth'\r\nimport * as authSagas from './auth'\r\n\r\nimport * as editorActions from '../actions/editor'\r\nimport * as editorSagas from './editor'\r\n\r\nimport * as yourStoriesActions from '../actions/your-stories'\r\nimport * as yourStoriesSagas from './your-stories'\r\n\r\nimport * as storyActions from '../actions/story'\r\nimport * as storySagas from './story'\r\n\r\nexport default function* saga() {\r\n  const relations = [\r\n    [genericActions, genericSagas],\r\n    [authActions, authSagas],\r\n    [editorActions, editorSagas],\r\n    [yourStoriesActions, yourStoriesSagas],\r\n    [storyActions, storySagas]\r\n  ]\r\n\r\n  for (const [actions, sagas] of relations) {\r\n    for (const [actionName, action] of Object.entries(actions)) {\r\n      const saga = sagas[actionName]\r\n      if (saga) yield takeLatest(action.getType(), saga)\r\n    }\r\n  }\r\n}\r\n","import _ from 'lodash'\nimport { clone, setWith, curry } from 'lodash/fp'\n\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n\nexport const connectTo = (mapStateToProps, actions, Container) => {\n  const mapDispatchToProps = dispatch => bindActionCreators(actions, dispatch)\n  return connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Container)\n}\n\nexport const callIf = (condition, func) => (condition ? func : _ => null)\n\nexport const getUniqueName = (name, otherNames) => {\n  const suffixes = otherNames\n    .filter(n => n.startsWith(name))\n    .map(n => n.slice(name.length))\n  if (!suffixes.includes('')) return name\n\n  let number = 1\n  while (number) {\n    const strNumber = number.toString()\n    if (!suffixes.includes(strNumber)) return name + strNumber\n    number++\n  }\n}\n\nexport const takeFromState = (state, stateObjectName, fields) =>\n  _.pick(state[stateObjectName], fields)\n\nexport const setIn = curry((obj, path, value) =>\n  setWith(clone, path, value, clone(obj))\n)\n\nexport const firstUpperWords = (text, length) =>\n  text\n    .split(' ')\n    .map(element => element[0].toUpperCase())\n    .splice(0, length)\n\nexport const sliceWithDots = (text, length) => {\n  return text.length > length ? text.slice(0, length) + '...' : text\n}\n\nexport const pluralize = (text, amount) => {\n  return amount === 1 ? text : text + 's'\n}\n\nexport const pascalToText = text =>\n  _.capitalize(text.replace(/([A-Z][a-z])/g, ' $1').replace(/(\\d)/g, ' $1'))\n\nexport const snakeToText = text => _.capitalize(text.split('_').join(' '))\nexport const def = v => v !== undefined\n\nexport const logArgs = func => (...args) => {\n  console.info(`${func.name} args: `, ...args)\n  return func(...args)\n}\n\nexport const switchCase = (cases, key, defaultCase) => {\n  const func = cases[key]\n  return func ? func() : defaultCase()\n}\n\nexport const noPropogation = func => e => {\n  e.stopPropagation()\n  func()\n}","import React from 'react'\nimport styled from 'styled-components'\n\nconst Logo = styled.h1`\n  cursor: ${props => props.clickable ? 'pointer' : 'default' };\n  margin: 10px;\n  text-align: center;\n  font-family: 'Dancing Script', cursive;\n`\n\nexport default ({ onClick }) => <Logo onClick={onClick} clickable={Boolean(onClick)}>Post Me</Logo>","import React from 'react'\nimport { AppBar, Toolbar, Menu, MenuItem, IconButton } from '@material-ui/core'\nimport { AccountCircle } from '@material-ui/icons'\nimport styled from 'styled-components'\n\nimport * as actions from '../actions/navbar'\nimport { to } from '../actions/navigation'\nimport { unauthorizeUser } from '../actions/auth'\nimport { connectTo } from '../utils/generic'\n\nimport Logo from './logo'\n\n\nconst StyledToolbar = styled(Toolbar)`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n`\n\nconst Navbar = ({ to, unauthorizeUser, dropdownOpen, dropdownAnchor, toggleDropdown }) => {\n  const itemHandler = func => () => {\n    toggleDropdown()\n    func()\n  }\n  return (\n    <AppBar position='static'>\n      <StyledToolbar>\n        <Logo onClick={() => to('stories')}/>\n        <div>\n          <IconButton\n            aria-owns={dropdownOpen ? 'menu-appbar' : null}\n            aria-haspopup=\"true\"\n            onClick={({ currentTarget }) => toggleDropdown(currentTarget)}\n            color=\"inherit\"\n          >\n            <AccountCircle />\n          </IconButton>\n          <Menu\n            id=\"menu-appbar\"\n            anchorEl={dropdownAnchor}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            open={dropdownOpen}\n            onClose={toggleDropdown}\n          >\n            <MenuItem onClick={itemHandler(unauthorizeUser)}>Sign out</MenuItem>\n            <MenuItem onClick={itemHandler(() => to('editor'))}>New story</MenuItem>\n            <MenuItem onClick={itemHandler(() => to('yourStories'))}>Stories</MenuItem>\n          </Menu>\n        </div>\n      </StyledToolbar>\n    </AppBar>\n  )\n}\n\nexport default connectTo(\n  state => state.navbar,\n  { ...actions, to, unauthorizeUser },\n  Navbar\n)","import _ from 'lodash'\r\n\r\nexport const EMAIL_REGEX = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n\r\nexport const WEBSITE_REGEX = /^(https?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$/\r\n\r\nconst minLength = min => value =>\r\n  value && value.length < min ? `Length should be more than ${min}` : undefined\r\n\r\nexport const required = value => (value ? undefined : 'Required')\r\n\r\nexport const moreThan = (\r\n  limit,\r\n  message = `Should be more than ${limit}`\r\n) => n => (n > limit ? undefined : message)\r\n\r\nexport const lessThan = (\r\n  limit,\r\n  message = `Should be less than ${limit}`\r\n) => n => (n < limit ? undefined : message)\r\n\r\nexport const integer = n =>\r\n  n.toString().includes('.') ? 'Should be integer' : undefined\r\n\r\nexport const lengthMoreThan = (\r\n  limit,\r\n  message = `Length should be more than ${limit}`\r\n) => str => (!str || str.length < limit ? message : undefined)\r\n\r\nexport const lengthLessThan = (\r\n  limit,\r\n  message = `Length should be less than ${limit}`\r\n) => str => (!str || str.length > limit ? message : undefined)\r\n\r\nexport const minLength6 = minLength(6)\r\n\r\nexport const minLenght4 = minLength(4)\r\n\r\nexport const lengthLessThan40 = lengthLessThan(40)\r\n\r\nexport const email = value =>\r\n  !value || !EMAIL_REGEX.test(value) ? 'Invalid email address' : undefined\r\n\r\nexport const uniqueAmong = (values, message = 'Should be unique') => v =>\r\n  v && _.includes(values, v) ? message : undefined\r\n\r\nexport const website = value =>\r\n  value && !WEBSITE_REGEX.test(value) ? 'Invalid website' : undefined\r\n","export const submitHandler = (onSubmit, enabledSubmit) => e => {\r\n  e.preventDefault()\r\n  if (enabledSubmit) onSubmit()\r\n}\r\n\r\nexport const submitAsyncValidation = (\r\n  handleSubmit,\r\n  enabledSubmit,\r\n  onSubmit\r\n) => e => {\r\n  e.preventDefault()\r\n  enabledSubmit &&\r\n    handleSubmit(\r\n      values =>\r\n        new Promise((resolve, reject) => onSubmit({ values, resolve, reject }))\r\n    )(e)\r\n}\r\n\r\nexport const isValid = (state, formName) => isFormValid(state.form[formName])\r\n\r\nexport const isFormValid = form => form && !form.syncErrors && !form.pristine\r\n","import React from 'react'\nimport styled from 'styled-components'\nimport { TextField } from '@material-ui/core'\n\nconst TextFieldForRender = ({\n  input,\n  label,\n  meta: { active, error, warning },\n  ...custom\n}) => {\n  const message = !active ? error || warning : undefined\n  const showError = Boolean(message && input.value)\n  return (\n    <TextField\n      label={label}\n      error={showError}\n      helperText={message && input.value ? message : undefined}\n      {...input}\n      {...custom}\n    />\n  )\n}\n\nexport default styled(TextFieldForRender)`\n  && {\n    margin: 5px 0;\n  }\n`","import React from 'react'\nimport { Snackbar, IconButton } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { connectTo } from '../utils/generic';\nimport { toggleSnackbar } from '../actions/generic'\n\nexport default connectTo(\n  state => state.generic,\n  { toggleSnackbar },\n  ({ snackbarMessage, toggleSnackbar }) => (\n    <Snackbar\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'right',\n      }}\n      open={snackbarMessage.length > 0}\n      autoHideDuration={3000}\n      onClose={() => toggleSnackbar('')}\n      onExited={() => toggleSnackbar('')}\n      ContentProps={{\n        'aria-describedby': 'message-id',\n      }}\n      message={<span>{snackbarMessage}</span>}\n      action={[\n        <IconButton\n          key=\"close\"\n          aria-label=\"Close\"\n          color=\"inherit\"\n          onClick={() => toggleSnackbar('')}\n        >\n          <CloseIcon />\n        </IconButton>,\n      ]}\n    />\n  )\n)","import _ from 'lodash'\nimport DocumentTitle from 'react-document-title'\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport styled from 'styled-components'\n\nimport React from 'react'\nimport { HotKeys } from 'react-hotkeys'\nimport { connectTo } from '../utils/generic'\nimport { enterPage, exitPage } from '../actions/generic'\n\nimport Snackbar from './snackbar'\n\n\nconst Loading = styled.div`\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nclass PageWrapper extends React.Component {\n  render() {\n    const {\n      children,\n      keyMap,\n      handlers,\n      stateReceived,\n      page,\n      documentTitle = 'Post Me',\n      style\n    } = this.props\n    this.page = page\n    return stateReceived || process.env.REACT_APP_MOCK ? (\n      <DocumentTitle title={documentTitle}>\n        {_.isEmpty(keyMap) ? (\n          <div style={style}>\n            <Snackbar/>\n            {children}\n          </div>\n        ) : (\n          <HotKeys\n            style={style}\n            keyMap={keyMap}\n            handlers={handlers}\n            focused\n          >\n            <Snackbar/>\n            {children}\n          </HotKeys>\n        )}\n      </DocumentTitle>\n    ) : (\n      <Loading>\n        <CircularProgress/>\n      </Loading>\n    )\n  }\n\n  componentDidMount() {\n    if (!process.env.REACT_APP_MOCK) this.props.enterPage()\n  }\n\n  componentWillUnmount() {\n    if (!process.env.REACT_APP_MOCK) this.props.exitPage(this.page)\n  }\n}\n\nexport default connectTo(\n  state => ({\n    page: state.navigation.page,\n    stateReceived: state.cache.stateReceived[state.navigation.page]\n  }),\n  { enterPage, exitPage },\n  PageWrapper\n)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Paper, Button } from '@material-ui/core'\n\nimport Logo from '../logo'\nimport Page from '../page-wrapper'\nimport { submitAsyncValidation} from '../../utils/forms'\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n`\n\nconst Container = styled(Paper)`\n  width: 320px;\n  padding: 20px;\n`\n\n\nconst SubmitButton = styled(Button)`\n  && {\n    margin-top: 20px;\n  }\n`\n\n\nconst BottomText = styled(Button)`\n  && {\n    margin-top: 10px;\n  }\n`\n\nexport default ({ handleSubmit, enabledSubmit, onSubmit, submitText, onBottomTextClick, bottomText, fields }) => {\n  const pageStyle = {\n    height: '100vh',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'column'\n  }\n  return (\n    <Page style={pageStyle}>\n      <Container>\n        <Form\n          onSubmit={submitAsyncValidation(handleSubmit, enabledSubmit, onSubmit)}\n        >\n          <Logo/>\n          {fields}\n          <SubmitButton type=\"submit\" variant=\"outlined\" disabled={!enabledSubmit}>{submitText}</SubmitButton>\n        </Form>\n      </Container>\n      <BottomText onClick={onBottomTextClick} color='primary' size='small'>{bottomText}</BottomText>\n    </Page>\n  )\n}\n","import React from 'react'\nimport { Field, reduxForm } from 'redux-form'\n\nimport { submitLogin } from '../../actions/auth'\nimport { to } from '../../actions/navigation'\nimport { required, email, minLength6, lengthLessThan40 } from '../../validators/forms';\nimport { connectTo } from '../../utils/generic';\nimport { isValid} from '../../utils/forms'\nimport TextField from './text-field'\nimport AuthForm from './auth-form'\n\nexport default connectTo(\n  state => ({\n    enabledSubmit: isValid(state, 'login')\n  }),\n  { to, submitLogin },\n  reduxForm({ form: 'login' })(\n    ({\n      handleSubmit,\n      enabledSubmit,\n      submitLogin,\n      to\n    }) => {\n      const fields = [\n        <Field\n          name=\"email\"\n          key=\"email\"\n          component={TextField}\n          label=\"Email\"\n          type=\"text\"\n          validate={[required, email]}\n        />,\n        <Field\n          name=\"password\"\n          key=\"password\"\n          component={TextField}\n          label=\"Password\"\n          type=\"password\"\n          validate={[required, minLength6, lengthLessThan40]}\n        />\n      ]\n      return (\n        <AuthForm\n          fields={fields}\n          handleSubmit={handleSubmit}\n          enabledSubmit={enabledSubmit}\n          onSubmit={submitLogin}\n          submitText='Login'\n          onBottomTextClick={() => to('register')}\n          bottomText=\"Don't have an account? Register\"\n        />\n      )\n    }\n  )\n)","import React from 'react'\nimport { Field, reduxForm } from 'redux-form'\n\nimport { submitRegister } from '../../actions/auth'\nimport { to } from '../../actions/navigation'\nimport { required, email, minLength6, lengthLessThan40, minLenght4 } from '../../validators/forms';\nimport { connectTo } from '../../utils/generic';\nimport { isValid} from '../../utils/forms'\nimport TextField from './text-field'\nimport AuthForm from './auth-form'\n\nexport default connectTo(\n  state => ({\n    enabledSubmit: isValid(state, 'register')\n  }),\n  { to, submitRegister },\n  reduxForm({ form: 'register' })(\n    ({\n      handleSubmit,\n      enabledSubmit,\n      submitRegister,\n      to\n    }) => {\n      const fields = [\n        <Field\n          name=\"email\"\n          key=\"email\"\n          component={TextField}\n          label=\"Email\"\n          type=\"text\"\n          validate={[required, email]}\n        />,\n        <Field\n          name=\"username\"\n          key=\"username\"\n          component={TextField}\n          label=\"Username\"\n          type=\"text\"\n          validate={[required, minLenght4]}\n        />,\n        <Field\n          name=\"password\"\n          key=\"password\"\n          component={TextField}\n          label=\"Password\"\n          type=\"password\"\n          validate={[required, minLength6, lengthLessThan40]}\n        />\n      ]\n      return (\n        <AuthForm\n          fields={fields}\n          handleSubmit={handleSubmit}\n          enabledSubmit={enabledSubmit}\n          onSubmit={submitRegister}\n          submitText='Register'\n          onBottomTextClick={() => to('login')}\n          bottomText=\"Already have an account? Login\"\n        />\n      )\n    }\n  )\n)","import styled from 'styled-components'\n\nconst StoriesContainer = styled.div`\n  margin: 40px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n`\n\nexport default StoriesContainer","import styled from 'styled-components'\n\nimport { Card } from '@material-ui/core'\n\nconst StyledCard = styled(Card)`\n  && {\n    cursor: pointer;\n    width: 480px;\n    margin: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between\n  }\n`\n\nexport default StyledCard","import React from 'react'\nimport { Chip } from '@material-ui/core'\n\nexport default ({ ...chipProps }) => (\n  <Chip\n    { ...chipProps }\n    style={{ margin: 10 }}\n  />\n)","import React from 'react'\nimport styled from 'styled-components'\n\nimport { CardContent, Typography } from '@material-ui/core'\nimport StoryCardContainer from '../story-card-container'\nimport Tag from '../tag'\n\nconst TagsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n`\n\nexport default ({ title , dateText, onClick, ownerUsername, tags }) => {\n  return (\n    <StoryCardContainer onClick={onClick}>\n      <CardContent>\n        <Typography style={{ marginBottom: 16, fontSize: 14 }} color='textSecondary'>\n          {dateText}\n        </Typography>\n        <Typography style={{ height: 120 }} variant=\"headline\" component=\"h2\">\n          {title}\n        </Typography>\n        <TagsContainer style={{ height: 100 }}>\n          {tags.map(tag => (\n            <Tag\n              key={tag}\n              label={tag}\n            />\n          ))}\n        </TagsContainer>\n        <Typography style={{ marginBottom: 16, fontSize: 14 }}>\n          written by {ownerUsername}\n        </Typography>\n      </CardContent>\n    </StoryCardContainer>\n  )\n}","import { DateTime } from 'luxon'\n\n\nexport const timestampForHuman = timestamp => DateTime.fromMillis(timestamp * 1000).toLocaleString({ month: 'long', day: 'numeric' })","import _ from 'lodash'\nimport React from 'react'\n\nimport Page from '../page-wrapper'\nimport { connectTo } from '../../utils/generic';\nimport StoriesContainer from '../stories-container';\nimport StoryCard from './story-card'\nimport { toStory } from '../../actions/navigation';\nimport { timestampForHuman } from '../../utils/time';\n\nexport default connectTo(\n  state => state.stories,\n  { toStory },\n  ({ stories, toStory }) => (\n    <Page>\n      <StoriesContainer>\n        {_.sortBy(stories, ['publishTime']).reverse().map((story, number) => {\n          const date = timestampForHuman(story.publishTime)\n          const dateText = `Published on ${date}`\n\n          return (\n            <StoryCard\n              title={story.title}\n              ownerUsername={story.ownerUsername}\n              tags={story.tags}\n              key={number}\n              dateText={dateText}\n              onClick={() => toStory(story.id)}\n            />\n          )\n        })}\n      </StoriesContainer>\n    </Page>\n  )\n)","import React from 'react'\nimport { MenuList, MenuItem, Paper } from '@material-ui/core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faBold,\n  faItalic,\n  faQuoteRight,\n  faLink,\n  faCode,\n  faListOl,\n  faListUl,\n  faHeading,\n  faImage\n} from '@fortawesome/fontawesome-free-solid'\nimport styled from 'styled-components'\n\nimport * as actions from '../../actions/editor'\nimport { connectTo } from '../../utils/generic'\nimport { MARKS, BLOCKS } from '../../constants/editor'\n\nconst Container = styled(Paper)`\n  width: 50px;\n  position: fixed;\n  right: 20px;\n  bottom: 20px;\n`\n\nconst Effect = styled(MenuItem)`\n  && {\n    display: flex;\n    justify-content: center;\n  }\n`\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ toggleEffect, content, linkPrompt }) => {\n    const isSelected = type => {\n      if (Object.values(MARKS).includes(type)) {\n        return content.activeMarks.some(mark => mark.type === type)\n      }\n      if (type === BLOCKS.IMAGE) return linkPrompt === BLOCKS.IMAGE\n      if (type === BLOCKS.LINK) return content.inlines.some(inline => inline.type === BLOCKS.LINK)\n      \n      return content.blocks.some(node => node.type === type)\n    }\n    const items = [\n      [faBold, MARKS.BOLD],\n      [faItalic, MARKS.ITALIC],\n      [faCode, MARKS.CODE],\n      [faLink, BLOCKS.LINK],\n      [faImage, BLOCKS.IMAGE],\n      [faHeading, BLOCKS.HEADING_ONE],\n      [faHeading, BLOCKS.HEADING_TWO],\n      [faListOl, BLOCKS.NUMBERED_LIST],\n      [faListUl, BLOCKS.BULLETED_LIST],\n      [faQuoteRight, BLOCKS.QUOTE],\n    ].map(([ icon, effect ]) => (\n      <Effect\n        key={effect}\n        selected={isSelected(effect)}\n        onClick={() => toggleEffect(effect)}\n      >\n        <FontAwesomeIcon\n          icon={icon}\n          size={effect !== BLOCKS.HEADING_TWO ? 'sm' : 'xs'}\n        />\n      </Effect>\n    ))\n\n    return (\n      <Container>\n        <MenuList open={true}>\n          {items}\n        </MenuList>\n      </Container>\n    )\n  }\n)","import React from 'react'\nimport { TextField } from '@material-ui/core'\nimport styled from 'styled-components'\n\nimport * as actions from '../../actions/editor'\nimport { connectTo } from '../../utils/generic';\n\nconst Container = styled.div`\n  width: '100%';\n  display: flex;\n  justify-content: center;\n  margin: 20px;\n`\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ changeTitle, title }) => (\n    <Container>\n      <TextField\n        style={{ width: 320 }}\n        onChange={({ target: { value } }) => changeTitle(value)}\n        value={title}\n        label='Title'\n      />\n    </Container>\n  )\n)","import React from 'react'\nimport { Button } from '@material-ui/core'\n\nimport * as actions from '../../actions/editor'\nimport { connectTo } from '../../utils/generic';\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ changesSaved, save }) => {\n    return changesSaved ? (\n      <p>Saved</p>\n    ) : (\n      <Button variant='outlined' onClick={save}>\n        Save\n      </Button>\n    )\n  }\n)","import React from 'react'\nimport { Button } from '@material-ui/core'\n\nimport * as actions from '../../actions/editor'\nimport { connectTo } from '../../utils/generic';\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ toggleTagsMenu }) => {\n    return (\n      <Button variant='contained' color='primary' onClick={toggleTagsMenu}>\n        Publish\n      </Button>\n    )\n  }\n)","import React from 'react'\nimport { Button } from '@material-ui/core'\n\nimport * as actions from '../../actions/editor'\nimport { connectTo } from '../../utils/generic';\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ toggleShareDialog }) => {\n    return (\n      <Button variant='outlined' color='primary' onClick={toggleShareDialog}>\n        Share\n      </Button>\n    )\n  }\n)","import React from 'react'\nimport styled from 'styled-components'\nimport { lime } from '@material-ui/core/colors'\n\nimport { switchCase } from '../../utils/generic';\n\nimport { MARKS } from '../../constants/editor'\n\n\nconst Code = styled.code`\n  font-family: monospace;\n  background: ${lime[200]};\n  padding: 3px;\n`\n\nexport default ({ children, mark: { type }, attributes }) => switchCase(\n  {\n    [MARKS.BOLD]: () => <strong {...attributes}>{children}</strong>,\n    [MARKS.ITALIC]: () => <em {...attributes}>{children}</em>,\n    [MARKS.CODE]: () => <Code {...attributes}>{children}</Code>\n  },\n  type,\n  () => null\n)","import React from 'react'\nimport styled from 'styled-components'\nimport { purple } from '@material-ui/core/colors'\n\nimport { switchCase } from '../../utils/generic';\nimport { BLOCKS} from '../../constants/editor'\n\n\nconst Quote = styled.blockquote`\n  border-left: 2px solid #ddd;\n  margin-left: 0;\n  margin-right: 0;\n  padding-left: 10px;\n  color: #aaa;\n  font-style: italic;\n`\n\nconst HeadingOne = styled.h1`\n  padding: 10px 0;\n`\n\nconst HeadingTwo = styled.h2`\n  padding: 8px 0;\n`\n\nconst BulletedList = styled.ul`\n  margin: 0 40px;\n`\n\nconst NumberedList = styled.ol`\n  padding: 0 40px;\n`\n\nconst Image = styled.img`\n  max-width: 100%;\n  max-height: 20em;\n  box-shadow: ${props => (props.selected ? `0 0 0 2px ${purple[200]}` : 'none')};\n`\n\n\nexport default ({ attributes, children, node, isFocused }) => switchCase(\n  {\n    [BLOCKS.QUOTE]: () => <Quote {...attributes}>{children}</Quote>,\n    [BLOCKS.HEADING_ONE]: () => <HeadingOne {...attributes}>{children}</HeadingOne>,\n    [BLOCKS.HEADING_TWO]: () => <HeadingTwo {...attributes}>{children}</HeadingTwo>,\n    [BLOCKS.BULLETED_LIST]: () => <BulletedList {...attributes}>{children}</BulletedList>,\n    [BLOCKS.NUMBERED_LIST]: () => <NumberedList {...attributes}>{children}</NumberedList>,\n    [BLOCKS.LINK]: () => <a {...attributes} href={node.data.get('href')}>{children}</a>,\n    [BLOCKS.IMAGE]: () => <Image src={node.data.get('src')} selected={isFocused} {...attributes} />,\n    'list-item': () => <li {...attributes}>{children}</li>\n  },\n  node.type,\n  () => null,\n)","import React from 'react'\nimport { Editor } from 'slate-react'\nimport { Block } from 'slate'\n\nimport { connectTo } from '../../utils/generic';\nimport * as actions from '../../actions/editor'\n\nimport Mark from './mark'\nimport Node from './node'\n\nconst schema = {\n  document: {\n    last: { type: 'paragraph' },\n    normalize: (change, { code, node }) => {\n      if (code === 'last_child_type_invalid') {\n        const paragraph = Block.create('paragraph')\n        return change.insertNodeByKey(node.key, node.nodes.size, paragraph)\n      }\n    },\n  },\n  blocks: {\n    image: {\n      isVoid: true,\n    },\n  },\n}\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ content, changeContent }) => {\n    return (\n      <Editor\n        style={{ paddingTop: '20px', height: '100%' }}\n        autoFocus\n        placeholder=\"Type your story here.\"\n        value={content}\n        schema={schema}\n        onChange={({ value }) => changeContent(value)}\n        renderNode={Node}\n        renderMark={Mark}\n      />\n    )\n  }\n)","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { connectTo } from '../../utils/generic'\nimport * as actions from '../../actions/editor'\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ changeLink, exitLinkPrompt, submitLink }) => (\n    <Dialog\n      open={true}\n      onClose={exitLinkPrompt}\n      aria-labelledby=\"form-dialog-link\"\n    >\n      <DialogTitle id=\"form-dialog-link\">Enter the URL</DialogTitle>\n      <DialogContent>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id=\"url\"\n          label=\"URL\"\n          type=\"url\"\n          style={{ minWidth: 320 }}\n          fullWidth\n          onChange={({ target: { value } }) => changeLink(value)}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={exitLinkPrompt} color='primary'>\n          Cancel\n        </Button>\n        <Button onClick={submitLink} color='primary'>\n          Submit\n        </Button>\n      </DialogActions>      \n    </Dialog>\n  )\n)","import React from 'react';\nimport styled from 'styled-components'\nimport { TextField, Dialog, DialogActions, DialogContent, DialogTitle, Button, Paper } from '@material-ui/core';\n\nimport { connectTo } from '../../utils/generic'\nimport * as actions from '../../actions/editor'\nimport { TAGS_LIMIT } from '../../constants/editor';\nimport Tag from '../tag'\n\nconst InputLine = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst ChipsContainer = styled(Paper)`\n  && {\n    margin: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: center;\n  }\n`\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ editTag, submitTag, deleteTag, tags, editingTag, toggleTagsMenu, publish }) => (\n    <Dialog\n      open={true}\n      onClose={toggleTagsMenu}\n      aria-labelledby=\"form-dialog-tags\"\n    >\n      <DialogTitle id=\"form-dialog-tags\">\n        Add or change tags (up to {TAGS_LIMIT}) so readers know what your story is about\n      </DialogTitle>\n      <DialogContent>\n        {tags.length < 5 && (\n          <InputLine>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Tag\"\n              type=\"text\"\n              fullWidth\n              value={editingTag}\n              onChange={({ target: { value } }) => editTag(value)}\n            />\n            <Button onClick={submitTag} size='small' variant='outlined' color='primary'>\n              Add\n            </Button>\n          </InputLine>\n        )}\n        <ChipsContainer>\n          {\n            tags.map(tag => (\n              <Tag\n                key={tag}\n                label={tag}\n                onDelete={() => deleteTag(tag)}\n              />\n            ))\n          }\n        </ChipsContainer>\n      </DialogContent>\n      <DialogActions>\n        <Button style={{ margin: 'auto' }} color='primary' variant='contained' onClick={publish}>\n          Publish\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n)","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { connectTo } from '../../utils/generic'\nimport * as actions from '../../actions/editor'\n\nexport default connectTo(\n  state => state.editor,\n  actions,\n  ({ changeUserToShareName, toggleShareDialog, share }) => (\n    <Dialog\n      open={true}\n      onClose={toggleShareDialog}\n      aria-labelledby=\"form-share\"\n    >\n      <DialogTitle id=\"form-share\">Enter username</DialogTitle>\n      <DialogContent>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id=\"share\"\n          label=\"Username\"\n          type=\"text\"\n          style={{ minWidth: 320 }}\n          fullWidth\n          onChange={({ target: { value } }) => changeUserToShareName(value)}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={toggleShareDialog} color='primary'>\n          Cancel\n        </Button>\n        <Button onClick={share} color='primary'>\n          Submit\n        </Button>\n      </DialogActions>      \n    </Dialog>\n  )\n)","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n`\nconst ContainerInner = styled.div`\n  width: 720px;\n`\n\nexport default ({ children }) => (\n  <Container>\n    <ContainerInner>\n      {children}\n    </ContainerInner>\n  </Container>\n)","import React from 'react'\nimport styled from 'styled-components'\n\nimport Page from '../page-wrapper'\nimport EffectsMenu from './effects-menu'\nimport Title from './title'\nimport Save from './save'\nimport Publish from './publish'\nimport Share from './share'\nimport Editor from './editor'\nimport LinkDialog from './link-dialog'\nimport TagsDialog from './tags-dialog'\nimport ShareDialog from './share-dialog'\nimport { connectTo } from '../../utils/generic';\nimport ContentContainer from '../content-container'\n\nconst SIDE_PADDING = 50;\n\nconst TopLine = styled.div`\n  width: 100%;\n  height: 80px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 ${SIDE_PADDING}px;\n`\n\nconst Right = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Space = styled.div`\n  width: 20px;\n`\n\nexport default connectTo(\n  state => state.editor,\n  {},\n  ({ linkPrompt, tagsMenuOpen, shareDialogOpen, owner }) => {\n    return (\n      <Page style={{ padding: `0 ${SIDE_PADDING}px` }}>\n        <TopLine>\n          <Save/>\n          {owner ? (\n            <Right>\n              <Share/>\n              <Space/>\n              <Publish/>\n            </Right>\n            ) : <div/>\n          }\n        </TopLine>\n        <ContentContainer>\n          <Title/>\n          <Space/>\n          <Editor/>\n        </ContentContainer>\n        <EffectsMenu/>\n        { linkPrompt && <LinkDialog/> }\n        { tagsMenuOpen && <TagsDialog/> }\n        { shareDialogOpen && <ShareDialog/> }\n      </Page>\n    )\n  }\n)\n","import React from 'react'\n\nimport { CardActions, CardContent, Button, Typography } from '@material-ui/core'\nimport { noPropogation } from '../../utils/generic';\nimport StoryCardContainer from '../story-card-container'\n\nexport default ({ title , dateText, onEdit, onDelete, onClick }) => {\n  return (\n    <StoryCardContainer onClick={onClick}>\n      <CardContent>\n        <Typography style={{ marginBottom: 16, fontSize: 14 }} color='textSecondary'>\n          {dateText}\n        </Typography>\n        <Typography variant=\"headline\" component=\"h2\">\n          {title}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        { onEdit && (\n          <Button onClick={noPropogation(onEdit)} size='small' variant='outlined'>\n            Edit\n          </Button>\n        )}\n        { onDelete && (\n          <Button onClick={noPropogation(onDelete)} size='small' variant='contained' color='primary'>\n            Delete\n          </Button>\n        )}\n      </CardActions>\n    </StoryCardContainer>\n  )\n}","import React from 'react'\nimport styled from 'styled-components'\nimport { AppBar, Tabs, Tab, Typography } from '@material-ui/core'\n\nimport { connectTo } from '../../utils/generic'\nimport * as actions from '../../actions/your-stories'\nimport StoryCard from './story-card'\nimport Page from '../page-wrapper'\nimport { toStory } from '../../actions/navigation';\nimport { timestampForHuman } from '../../utils/time';\n\nimport StoriesContainer from '../stories-container'\n\nconst UsernameLine = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 20px;\n`\n\nexport default connectTo(\n  state => state.yourStories,\n  ({ ...actions, toStory }),\n  ({ selectTab, remove, drafts, published, shared, tab, edit, toStory }) => {\n    const stories = { drafts, published, shared }[tab]\n    const tabs = ['drafts', 'published', 'shared']\n    const value = tabs.indexOf(tab)\n    const renderStories = stories => (\n      <StoriesContainer>\n        {\n          stories.map((story, number) => {\n            const dateValue = story[tab === 'published' ? 'publishTime' : 'lastEditTime']\n            const date = timestampForHuman(dateValue)\n            const dateText = `${tab === 'published' ? 'Published on' : 'Last edit'} ${date}`\n            return (\n              <StoryCard\n                key={number}\n                title={story.title}\n                dateText={dateText}\n                onEdit={() => edit(story.id)}\n                onDelete={tab !== 'shared' ? () => remove(story.id) : undefined}\n                onClick={() => tab === 'published' ? toStory(story.id) : edit(story.id) }\n              />\n            )\n          })\n\n        }\n      </StoriesContainer>\n    )\n\n    return (\n      <Page>\n        <AppBar position='static'>\n          <Tabs value={value} onChange={(_, v) => selectTab(tabs[v])}>\n            <Tab label='drafts' />\n            <Tab label='published' />\n            <Tab label='shared' />\n          </Tabs>\n        </AppBar>\n        {stories && (tab === 'shared' ? \n          stories.map(({ username, drafts }) => (\n            <div key={username}>\n              <UsernameLine>\n                <Typography color='textSecondary'>\n                  {username} drafts\n                </Typography>\n              </UsernameLine>\n              {renderStories(drafts)}\n            </div>\n          ))\n          : renderStories(stories)\n        )}\n      </Page>\n    )\n  }\n)","import React from 'react'\nimport { Editor } from 'slate-react'\nimport { Typography, IconButton } from '@material-ui/core'\nimport { Favorite, FavoriteBorder } from '@material-ui/icons'\nimport styled from 'styled-components'\n\nimport { connectTo } from '../../utils/generic';\n\nimport ContentContainer from '../content-container'\nimport Mark from '../editor/mark'\nimport Node from '../editor/node'\nimport Page from '../page-wrapper'\nimport Tag from '../tag'\nimport { timestampForHuman } from '../../utils/time';\nimport * as actions from '../../actions/story'\n\nconst Info = styled.div`\n  margin: 20px;\n`\n\nconst Chips = styled.div`\n  display: flex;\n  flex-direction: row;\n`\n\nconst Likes = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n`\n\nconst LikesNumber = styled.p`\n  margin-left: 10px;\n`\n\nexport default connectTo(\n  state => ({\n    ...state.story,\n    userId: state.auth.id\n  }),\n  actions,\n  ({ title, content, publishTime, ownerUsername, ownerId, tags, userId, likesNumber, liked, toggleLike }) => {\n    return (\n      <Page>\n        <ContentContainer>\n          <Info>\n            <Typography variant=\"subheading\" gutterBottom>\n              author: {ownerUsername}\n            </Typography>\n            <Typography variant=\"body1\" gutterBottom>\n              {timestampForHuman(publishTime)}\n            </Typography>\n          </Info>\n          <Typography variant=\"display2\" gutterBottom>{title}</Typography>\n          { content && (\n            <Editor\n              readOnly\n              style={{ paddingTop: '20px' }}\n              value={content}\n              renderNode={Node}\n              renderMark={Mark}\n            />\n          )}\n          <Chips>\n            {\n              tags.map(tag => (\n                <Tag\n                  label={tag}\n                  key={tag}\n                />\n              ))\n            }\n          </Chips>\n          <Likes>\n            <IconButton\n              disabled={userId === ownerId}\n              onClick={toggleLike}\n            >\n              {liked ? <Favorite color='secondary' /> : <FavoriteBorder color='secondary'/>}\n            </IconButton>\n            <LikesNumber>{likesNumber}</LikesNumber>\n          </Likes>\n        </ContentContainer>\n      </Page>\n    )\n  }\n)","export const PAGES_WITH_NAVBAR = ['stories', 'editor', 'yourStories', 'story']","import React from 'react'\r\n\r\nimport Navbar from '../components/navbar'\r\n\r\nimport * as pages from '../pages'\r\n\r\nimport { to } from '../actions/navigation'\r\nimport { moveMouse, changePageSize } from '../actions/generic'\r\n\r\nimport { connectTo } from '../utils/generic'\r\nimport { PAGES_WITH_NAVBAR } from '../constants/navigation'\r\n\r\nimport styled from 'styled-components'\r\n\r\nconst Layout = styled.div`\r\n  min-height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n`\r\n\r\nclass MainLayout extends React.Component {\r\n  render() {\r\n    const { page } = this.props\r\n    if (!page) return 'No page was specified'\r\n    const Page = pages[page]\r\n    return (\r\n      <Layout>\r\n        {PAGES_WITH_NAVBAR.includes(page) && <Navbar />}\r\n        <Page />\r\n      </Layout>\r\n    )\r\n  }\r\n\r\n  // no need to remove event listeneres declared in this block\r\n  // since it will not be unmounted\r\n  componentDidMount() {\r\n    const { moveMouse, changePageSize } = this.props\r\n    window.addEventListener('popstate', this.popstate)\r\n    window.addEventListener('resize', () =>\r\n      changePageSize({ width: window.innerWidth, height: window.innerHeight })\r\n    )\r\n    document.addEventListener('mousemove', ({ clientX, clientY }) =>\r\n      moveMouse({ mouseX: clientX, mouseY: clientY })\r\n    )\r\n  }\r\n\r\n  // to: custom back button handle\r\n  popstate = () => {\r\n    // const { page, currentProject, to } = this.props\r\n    // if (page === 'Dashboard') return\r\n\r\n    // window.history.pushState({ }, '', '')\r\n    // to((page === 'ProjectDetails' || !currentProject) ? 'Dashboard' : 'ProjectDetails')\r\n  }\r\n}\r\n\r\nexport default connectTo(\r\n  state => ({\r\n    page: state.navigation.page\r\n  }),\r\n  { moveMouse, changePageSize, to },\r\n  MainLayout\r\n)\r\n","import React from 'react'\nimport { Provider } from 'react-redux'\n\nimport './utils/array-extensions'\n\nimport store from './store'\nimport saga from './sagas/'\nimport Root from './layouts/main'\nimport { sagaMiddleware } from './middleware'\n\nimport { receiveMockState } from './actions/mock'\n\nimport { loggedIn } from './utils/auth'\nimport { startApp } from './actions/generic'\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <Root />\n    </Provider>\n  )\n}\n\nexport default App\n\nsagaMiddleware.run(saga)\n\nloggedIn() && store.dispatch(startApp())\n\nif (process.env.REACT_APP_MOCK) {\n  import('./mocks/state.js').then(module => {\n    const state = store.getState()\n    store.dispatch(\n      receiveMockState(\n        Object.entries(state).reduce(\n          (acc, [key, value]) => ({\n            ...acc,\n            [key]: { ...value, ...module.MOCK_STATE[key] }\n          }),\n          {}\n        )\n      )\n    )\n  })\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}