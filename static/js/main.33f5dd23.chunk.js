(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5573:function(e,t,n){e.exports=n(5863)},5863:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"submitLogin",function(){return U}),n.d(r,"submitRegister",function(){return B}),n.d(r,"receiveAuthData",function(){return z}),n.d(r,"unauthorizeUser",function(){return K});var a={};n.r(a),n.d(a,"selectTab",function(){return X}),n.d(a,"remove",function(){return Q}),n.d(a,"edit",function(){return Z}),n.d(a,"receiveStoriesForTab",function(){return $}),n.d(a,"clear",function(){return ee});var c={};n.r(c),n.d(c,"receiveStory",function(){return te}),n.d(c,"toggleLike",function(){return ne});var i={};n.r(i),n.d(i,"toggleDropdown",function(){return ie});var o={};n.r(o),n.d(o,"changeTitle",function(){return se}),n.d(o,"toggleEffect",function(){return le}),n.d(o,"save",function(){return fe}),n.d(o,"changeContent",function(){return de}),n.d(o,"startRequest",function(){return be}),n.d(o,"successfulSave",function(){return pe}),n.d(o,"successfulCreation",function(){return me}),n.d(o,"changeLink",function(){return ve}),n.d(o,"exitLinkPrompt",function(){return ge}),n.d(o,"submitLink",function(){return he}),n.d(o,"toggleTagsMenu",function(){return Oe}),n.d(o,"editTag",function(){return je}),n.d(o,"submitTag",function(){return Ee}),n.d(o,"deleteTag",function(){return ye}),n.d(o,"publish",function(){return xe}),n.d(o,"receiveStoryForEdit",function(){return ke}),n.d(o,"updateStory",function(){return we}),n.d(o,"clear",function(){return Ae}),n.d(o,"toggleShareDialog",function(){return Se}),n.d(o,"share",function(){return Te}),n.d(o,"changeUserToShareName",function(){return _e});var u={};n.r(u),n.d(u,"startApp",function(){return Ie}),n.d(u,"enterPage",function(){return Ce}),n.d(u,"exitPage",function(){return Le}),n.d(u,"moveMouse",function(){return Ne}),n.d(u,"changePageSize",function(){return Pe}),n.d(u,"tick",function(){return Re}),n.d(u,"toggleSnackbar",function(){return De});var s={};n.r(s),n.d(s,"enterPage",function(){return Gt}),n.d(s,"startApp",function(){return Jt}),n.d(s,"exitPage",function(){return Ft}),n.d(s,"tick",function(){return Yt});var l={};n.r(l),n.d(l,"submitLogin",function(){return Qt}),n.d(l,"submitRegister",function(){return Zt});var f={};n.r(f),n.d(f,"storyUpdatePayload",function(){return rn}),n.d(f,"save",function(){return an}),n.d(f,"publish",function(){return cn}),n.d(f,"share",function(){return on});var d={};n.r(d),n.d(d,"selectTab",function(){return fn}),n.d(d,"remove",function(){return dn}),n.d(d,"edit",function(){return bn});var b={};n.r(b),n.d(b,"toggleLike",function(){return mn});var p={};n.r(p),n.d(p,"login",function(){return hr}),n.d(p,"register",function(){return Or}),n.d(p,"stories",function(){return Cr}),n.d(p,"editor",function(){return Ka}),n.d(p,"yourStories",function(){return Ja}),n.d(p,"story",function(){return ec});for(var m=n(0),v=n.n(m),g=n(32),h=n.n(g),O=n(5),j=n(8),E=n(46),y=n(65),x=n(37),k=n(39),w=n.n(k),A=[["last_",function(){return this.length>0?this[this.length-1]:void 0}],["take_",function(e){return this.map(function(t){return t[e]})}],["some_",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.some(function(t){return t[e].apply(t,n)})}],["every_",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.every(function(t){return t[e].apply(t,n)})}],["map_",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.map(function(t){return t[e].apply(t,n)})}],["find_",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.find(function(t){return t[e].apply(t,n)})}],["without_",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.reduce(function(e,n){return t.includes(n)?e:[].concat(Object(x.a)(e),[n])},[])}],["flatten_",function(){return this.reduce(function(e,t){return[].concat(Object(x.a)(e),Object(x.a)(t))},[])}],["sum_",function(){return this.reduce(function(e,t){return e+t},0)}],["empty_",function(){return 0===this.length}],["withoutLast_",function(){return this.slice(0,this.length-1)}],["previous_",function(e){if(!(this.length<2)){var t=this.indexOf(e);if(!(t<0))return 0===t?this.last_():this[t-1]}}],["next_",function(e){if(!(this.length<2)){var t=this.indexOf(e);if(!(t<0))return t===this.length-1?this[0]:this[t+1]}}],["sameAs_",function(e){return w.a.isEqual(this.sort(),e.sort())}],["pushIf_",function(e,t){return e?[].concat(Object(x.a)(this),[t]):this}],["orderBy_",function(e){return w.a.orderBy(this,[e],["ask"])}],["uniq_",function(){return w.a.uniq(this)}],["reverse_",function(){return this.reduce(function(e,t){return[t].concat(Object(x.a)(e))},[])}],["withoutOnce_",function(e){var t=this.indexOf(e);return[].concat(Object(x.a)(this.slice(0,t)),Object(x.a)(this.slice(t+1)))}],["replace_",function(e,t){return this.map(function(n){return n===e?t:n})}],["replaceAtIndex_",function(e,t){return[].concat(Object(x.a)(this.slice(0,e)),[t],Object(x.a)(this.slice(e+1)))}],["removeAtIndex_",function(e){return[].concat(Object(x.a)(this.slice(0,e)),Object(x.a)(this.slice(e+1)))}],["withoutUndef_",function(){return this.filter(function(e){return void 0!==e})}],["sameAs_",function(e){return w.a.isEqual(this.sort(),e.sort())}],["allTrue_",function(){return this.every(function(e){return e})}]],S=0;S<A.length;S++){var T=A[S],_=Object(E.a)(T,2),I=_[0],C=_[1];Array.prototype[I]=C}var L=n(27),N=n(280),P=n(5866),R=n(6),D=Object(R.createAction)(),M=Object(R.createAction)(),U=Object(R.createAction)(),B=Object(R.createAction)(),z=Object(R.createAction)(),K=Object(R.createAction)(),W=function(){var e=localStorage.getItem("tokenExpirationTime");return(new Date).getTime()/1e3<parseInt(e,10)},G=function(e,t){return{state:e,page:t}},H=function(e){var t;return Object(R.createReducer)((t={},Object(O.a)(t,D,G),Object(O.a)(t,M,function(e,t){return Object(j.a)({},e,{page:"story",storyId:t})}),Object(O.a)(t,K,function(e){return G(e,"login")}),t),{page:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAIN_API_URL:"https://blogapi20190328025351.azurewebsites.net/api/"}).REACT_APP_MOCK?void 0:W()?"stories":"login",storyId:void 0})},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String,n=localStorage.getItem(e);if(n)return t===Number?Number.parseFloat(n):t===Object?JSON.parse(n):n},q=function(e){var t;return Object(R.createReducer)((t={},Object(O.a)(t,z,function(e,t){var n=t.token,r=t.tokenExpirationTime,a=t.id;return Object(j.a)({},e,{id:a,token:n,tokenExpirationTime:r})}),Object(O.a)(t,K,function(){return{}}),t),{token:J("token"),id:J("id"),tokenExpirationTime:J("tokenExpirationTime",Number)})},F=Object(R.createAction)(),Y=Object(R.createAction)(),V=Object(R.createAction)(),X=Object(R.createAction)(),Q=Object(R.createAction)(),Z=Object(R.createAction)(),$=Object(R.createAction)(),ee=Object(R.createAction)(),te=Object(R.createAction)(),ne=Object(R.createAction)(),re=Object(R.createAction)(),ae=function(e,t,n){return Object(j.a)({},e,{stateReceived:Object(j.a)({},e.stateReceived,Object(O.a)({},t,n))})},ce=function(e){var t;return Object(R.createReducer)((t={},Object(O.a)(t,F,function(e,t){return Object(j.a)({},e,t)}),Object(O.a)(t,Y,function(e,t){var n=t.page,r=t.projectId,a=t.pageState;return Object(j.a)({},e,Object(O.a)({stateReceived:Object(j.a)({},e.stateReceived,Object(O.a)({},n,!1))},n,Object(j.a)({},e[n],Object(O.a)({},r,a))))}),Object(O.a)(t,V,function(e,t){return Object(j.a)({},e,{stateReceived:Object(j.a)({},e.stateReceived,Object(O.a)({},t,!1))})}),Object(O.a)(t,$,function(e){return ae(e,"yourStories",!0)}),Object(O.a)(t,ee,function(e){return ae(e,"yourStories",!1)}),Object(O.a)(t,te,function(e){return ae(e,"story",!0)}),Object(O.a)(t,re,function(e){return ae(e,"stories",!0)}),t),{stateReceived:{login:!0,register:!0,editor:!0,yourStories:!1,story:!1,stories:!1}})},ie=Object(R.createAction)(),oe=function(e){return Object(R.createReducer)(Object(O.a)({},ie,function(e,t){var n=!e.dropdownOpen;return Object(j.a)({},e,{dropdownOpen:n,dropdownAnchor:n?t:void 0})}),{dropdownOpen:!1,dropdownAnchor:void 0})},ue=n(17),se=Object(R.createAction)(),le=Object(R.createAction)(),fe=Object(R.createAction)(),de=Object(R.createAction)(),be=Object(R.createAction)(),pe=Object(R.createAction)(),me=Object(R.createAction)(),ve=Object(R.createAction)(),ge=Object(R.createAction)(),he=Object(R.createAction)(),Oe=Object(R.createAction)(),je=Object(R.createAction)(),Ee=Object(R.createAction)(),ye=Object(R.createAction)(),xe=Object(R.createAction)(),ke=Object(R.createAction)(),we=Object(R.createAction)(),Ae=Object(R.createAction)(),Se=Object(R.createAction)(),Te=Object(R.createAction)(),_e=Object(R.createAction)(),Ie=Object(R.createAction)(),Ce=Object(R.createAction)(),Le=Object(R.createAction)(),Ne=Object(R.createAction)(),Pe=Object(R.createAction)(),Re=Object(R.createAction)(),De=Object(R.createAction)(),Me=4e3,Ue={BOLD:"bold",ITALIC:"italic",CODE:"code"},Be={LINK:"link",HEADING_ONE:"heading-one",HEADING_TWO:"heading-two",NUMBERED_LIST:"numbered-list",BULLETED_LIST:"bulleted-list",QUOTE:"block-quote",IMAGE:"image"},ze=function(e){var t=e.drafts,n=e.published,r=e.shared;return[t,n,r?r.map(function(e){return e.drafts}).flatten_():void 0].withoutUndef_().flatten_()},Ke=function(){return{title:"",content:ue.o.fromJSON({document:{nodes:[{object:"block",type:"paragraph"}]}}),storyId:void 0,lastSave:Date.now(),lastEdit:void 0,changesSaved:!0,linkPrompt:void 0,link:"",tags:[],tagsMenuOpen:!1,shareDialogOpen:!1,userToShareName:"",editingTag:"",saving:!1,owner:!0}},We=function(e,t){var n=JSON.stringify(e.content)===JSON.stringify(t.content),r=e.tags.sameAs_(t.tags),a=e.title===t.title;return Object(j.a)({},t,{lastEdit:[n,r,a].allTrue_()?e.lastEdit:Date.now()})},Ge=function(e){return function(t,n){var r=e(t,n);return We(t,r)}},He=function(e){return e.unwrapInline(Be.LINK)},Je=function(e,t){return e.wrapInline({type:Be.LINK,data:{href:t}})},qe=function(e,t){return e.insertBlock({type:Be.IMAGE,data:{src:t}})},Fe=function(){var e;return Object(R.createReducer)((e={},Object(O.a)(e,se,Ge(function(e,t){return Object(j.a)({},e,{title:t.slice(0,60)})})),Object(O.a)(e,de,Ge(function(e,t){return Object(j.a)({},e,{content:t})})),Object(O.a)(e,fe,function(e){return Object(j.a)({},e,{saving:!0})}),Object(O.a)(e,pe,function(e){return Object(j.a)({},e,{lastSave:Date.now(),saving:!1})}),Object(O.a)(e,me,function(e,t){return Object(j.a)({},e,{storyId:t,saving:!1})}),Object(O.a)(e,Re,function(e){return Object(j.a)({},e,{changesSaved:!e.lastEdit||e.lastSave>e.lastEdit})}),Object(O.a)(e,le,function(e,t){try{var n=e.content,r=n.change(),a=n.document,c=function(e){return n.blocks.some(function(t){return t.type===e})},i=c("list-item");if(t===Be.LINK)return function(e){return e.inlines.some(function(e){return e.type===Be.LINK})}(n)?(r.call(He),We(e,Object(j.a)({},e,{content:r.value}))):n.selection.isExpanded?We(e,Object(j.a)({},e,{content:r.value,linkPrompt:Be.LINK})):e;if(t===Be.IMAGE)return We(e,Object(j.a)({},e,{content:r.value,linkPrompt:Be.IMAGE}));if(Object.values(Ue).includes(t))return We(e,Object(j.a)({},e,{content:r.toggleMark(t).value}));if(["bulleted-list","numbered-list"].includes(t)){var o=n.blocks.some(function(e){return!!a.getClosest(e.key,function(e){return e.type===t})});i&&o?r.setBlocks("paragraph").unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):i?r.unwrapBlock("bulleted-list"===t?"numbered-list":"bulleted-list").wrapBlock(t):r.setBlocks("list-item").wrapBlock(t)}else{var u=c(t);i?r.setBlocks(u?"paragraph":t).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):r.setBlocks(u?"paragraph":t)}return We(e,Object(j.a)({},e,{content:r.value}))}catch(s){return console.info("fail to execute effect"),e}}),Object(O.a)(e,ge,function(e){return Object(j.a)({},e,{linkPrompt:void 0,link:""})}),Object(O.a)(e,ve,function(e,t){return Object(j.a)({},e,{link:t})}),Object(O.a)(e,he,function(e){if(!e.link)return Object(j.a)({},e,{linkPrompt:void 0});var t=e.content.change();return t.call(e.linkPrompt===Be.LINK?Je:qe,e.link),We(e,Object(j.a)({},e,{content:t.value,linkPrompt:void 0,link:""}))}),Object(O.a)(e,Oe,function(e){return Object(j.a)({},e,{tagsMenuOpen:!e.tagsMenuOpen})}),Object(O.a)(e,je,function(e,t){return Object(j.a)({},e,{editingTag:t})}),Object(O.a)(e,Ee,Ge(function(e){return Object(j.a)({},e,{tags:(e.editingTag?[].concat(Object(x.a)(e.tags),[e.editingTag]):e.tags).uniq_(),editingTag:""})})),Object(O.a)(e,ye,Ge(function(e,t){return Object(j.a)({},e,{tags:e.tags.without_(t)})})),Object(O.a)(e,ke,function(e,t){return Object(j.a)({},Ke(),{storyId:t.id,title:t.title,content:ue.o.fromJSON(JSON.parse(t.content)),tags:t.tags,lastSave:Date.now(),owner:t.owner})}),Object(O.a)(e,we,function(e,t){var n=t.title,r=t.tags,a=t.lastEditTime,c=t.content;return Object(j.a)({},e,{title:n,tags:r,lastSave:1e3*a,content:ue.o.fromJSON(JSON.parse(c))})}),Object(O.a)(e,Ae,function(){return Ke()}),Object(O.a)(e,Se,function(e){return Object(j.a)({},e,{shareDialogOpen:!e.shareDialogOpen})}),Object(O.a)(e,Te,function(e){return Object(j.a)({},e,{shareDialogOpen:!1})}),Object(O.a)(e,_e,function(e,t){return Object(j.a)({},e,{userToShareName:t})}),e),Ke())},Ye=function(e){var t;return Object(R.createReducer)((t={},Object(O.a)(t,X,function(e,t){return Object(j.a)({},e,{tab:t})}),Object(O.a)(t,Q,function(e,t){return Object(j.a)({},e,Object(O.a)({},e.tab,e[e.tab].filter(function(e){return e.id!==t})))}),Object(O.a)(t,$,function(e,t){var n=t.stories,r=t.tab;return Object(j.a)({},e,Object(O.a)({},r,n))}),Object(O.a)(t,ee,function(){return{tab:"drafts",drafts:void 0,published:void 0,shared:void 0}}),t),{tab:"drafts",drafts:void 0,published:void 0,shared:void 0})},Ve=function(e){var t;return Object(R.createReducer)((t={},Object(O.a)(t,te,function(e,t){return Object(j.a)({},e,t,{storyId:t.id,content:ue.o.fromJSON(JSON.parse(t.content))})}),Object(O.a)(t,ne,function(e){return Object(j.a)({},e,{liked:!e.liked,likesNumber:e.liked?e.likesNumber-1:e.likesNumber+1})}),t),{storyId:void 0,ownerUsername:void 0,ownerId:void 0,publishTime:void 0,titile:void 0,content:void 0,tags:[],likesNumber:0,liked:!1})},Xe=function(){return Object(R.createReducer)(Object(O.a)({},re,function(e,t){return Object(j.a)({},e,{stories:t})}),{stories:[]})},Qe=function(){var e;return Object(R.createReducer)((e={},Object(O.a)(e,Pe,function(e,t){var n=t.width,r=t.height;return Object(j.a)({},e,{pageWidth:n,pageHeight:r})}),Object(O.a)(e,Ne,function(e,t){var n=t.mouseX,r=t.mouseY;return Object(j.a)({},e,{mouseX:n,mouseY:r})}),Object(O.a)(e,De,function(e,t){return Object(j.a)({},e,{snackbarMessage:t})}),e),{pageWidth:window.innerWidth,pageHeight:window.innerHeight,mouseX:0,mouseY:0,snackbarMessage:""})},Ze=Object(R.createAction)(),$e=function(){return P.a},et=function(e){return Object(L.combineReducers)(Object.entries({navigation:H,auth:q,cache:ce,form:$e,navbar:oe,editor:Fe,yourStories:Ye,story:Ve,stories:Xe,generic:Qe}).reduce(function(e,t){var n=Object(E.a)(t,2),r=n[0],a=n[1];return Object(j.a)({},e,Object(O.a)({},r,a()))},{}))},tt=et(),nt=n(104),rt=Object(nt.a)(),at=[rt,function(e){return function(t){return function(n){n.type===K.getType()&&localStorage.clear();var r=e.getState(),a=t(n),c=e.getState();return r.auth.token!==c.auth.token&&c.auth.token&&(localStorage.setItem("token",c.auth.token),localStorage.setItem("tokenExpirationTime",c.auth.tokenExpirationTime),localStorage.setItem("id",c.auth.id),localStorage.setItem("email",c.auth.email)),a}}}],ct=Object(L.createStore)(function(e,t){return t.type===K.getType()?tt(Object(L.createStore)(et()).getState()):t.type===Ze.getType()?tt(t.payload):tt(e,t)},Object(N.composeWithDevTools)(L.applyMiddleware.apply(void 0,Object(x.a)(at)))),it=n(13),ot=n.n(it),ut=n(16),st=200,lt=ot.a.mark(ft);function ft(){var e,t=arguments;return ot.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAIN_API_URL:"https://blogapi20190328025351.azurewebsites.net/api/"}).REACT_APP_MOCK){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,ut.a.apply(void 0,t);case 5:return e=n.sent,n.abrupt("return",e);case 9:if(n.prev=9,n.t0=n.catch(2),console.info("request with error: ",n.t0),401!==n.t0.status){n.next=17;break}return n.next=15,Object(ut.b)(K());case 15:n.next=18;break;case 17:throw n.t0;case 18:case"end":return n.stop()}},lt,null,[[2,9]])}var dt=n(97),bt=function e(t,n){Object(dt.a)(this,e),this.status=t,this.message=n},pt=function(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}},mt=function(e){return{method:"POST",mode:"cors",headers:pt(),body:JSON.stringify(e)}},vt=function(e,t){return fetch(e,t).then(function(e){var t=e.status;if(204===t)return{};var n=e.json();return t>=200&&t<400?n:n.then(function(e){throw new bt(t,e)})})},gt=function(e){return vt(e,{method:"GET",headers:pt()})},ht=function(e,t){return vt(e,mt(t))},Ot=function(e,t){return vt(e,function(e){return Object(j.a)({},mt(e),{method:"PATCH"})}(t))},jt=function(e,t){return vt(e+t,{method:"DELETE",mode:"cors",headers:pt()})},Et="https://blogapi20190328025351.azurewebsites.net/api/",yt="".concat(Et,"auth/"),xt="".concat(yt,"login"),kt="".concat(yt,"register"),wt="".concat(Et,"stories/"),At=wt,St=wt,Tt=function(e){return"".concat(wt).concat(e)},_t=function(e){return"".concat(wt).concat(e,"/publish")},It=function(e){return"".concat(wt,"user/").concat(e)},Ct=function(e){return"".concat(wt).concat(e)},Lt="".concat(wt,"drafts"),Nt="".concat(wt,"shared"),Pt=function(e){return"".concat(wt).concat(e,"/toggleLike")},Rt=function(e){return"".concat(wt).concat(e,"/share")},Dt=n(297),Mt=ot.a.mark(Gt),Ut=ot.a.mark(Ht),Bt=ot.a.mark(Jt),zt=ot.a.mark(Ft),Kt=ot.a.mark(Yt),Wt={yourStories:ot.a.mark(function e(t){return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.b)(X(t.yourStories.tab));case 2:case"end":return e.stop()}},e)}),story:ot.a.mark(function(e){var t,n;return ot.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.navigation.storyId,r.next=3,ft(gt,Ct(t));case 3:return n=r.sent,r.next=6,Object(ut.b)(te(n));case 6:case"end":return r.stop()}},n)}),stories:ot.a.mark(function(e){var t,n;return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(gt,wt);case 2:return t=e.sent,n=t.stories,e.next=6,Object(ut.b)(re(n));case 6:case"end":return e.stop()}},n)})};function Gt(){var e,t,n;return ot.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(ut.c)();case 2:if(e=r.sent,t=e.navigation.page,!(n=Wt[t])){r.next=8;break}return r.next=8,n(e);case 8:case"end":return r.stop()}},Mt)}function Ht(){var e,t,n,r,a,c,i,o,u,s,l,f,d;return ot.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:e=(new Dt.a).withUrl("https://blogapi20190328025351.azurewebsites.net/notifications",{accessTokenFactory:function(){return localStorage.token}}).build(),t=0,n=!1;case 3:if(!(t<10)||n){b.next=20;break}return t++,n=!0,b.prev=6,b.next=9,Object(ut.a)(function(){return e.start()});case 9:console.info("SignalR: successfully connected"),b.next=18;break;case 12:return b.prev=12,b.t0=b.catch(6),console.info("SignalR: attempt ".concat(t,": failed to connect")),b.next=17,Object(ut.a)(nt.b,1e3);case 17:n=!1;case 18:b.next=3;break;case 20:if(!n){b.next=54;break}return r=function(e){return Object(nt.c)(function(t){return e.on("notification",function(e){t(e)}),function(){e.off()}})},b.next=24,Object(ut.a)(r,e);case 24:a=b.sent;case 25:return b.next=28,Object(ut.e)(a);case 28:if(c=b.sent,i=c.notificationType,o=c.payload,!["LIKE","UNLIKE"].includes(i)){b.next=37;break}return u="".concat(o.username," ").concat(i.toLowerCase(),'d "').concat(o.storyTitle,'"'),b.next=35,Object(ut.b)(De(u));case 35:b.next=52;break;case 37:if("SHARE"!==i){b.next=43;break}return s="".concat(o.username,' invited you to edit his story: "').concat(o.storyTitle,'"'),b.next=41,Object(ut.b)(De(s));case 41:b.next=52;break;case 43:if("STORY_EDIT"!==i){b.next=52;break}return b.next=46,Object(ut.c)();case 46:if(l=b.sent,f=l.navigation,d=l.editor,"editor"!==f.page||d.storyId!==o.id){b.next=52;break}return b.next=52,Object(ut.b)(we(o));case 52:b.next=25;break;case 54:case"end":return b.stop()}},Ut,null,[[6,12]])}function Jt(){var e,t;return ot.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=function(){return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.b)(Re());case 2:return e.next=4,Object(ut.a)(nt.b,st);case 4:return e.delegateYield(t(),"t0",5);case 5:case"end":return e.stop()}},e)},e=ot.a.mark(t),window.history.pushState({},"",""),n.next=5,Object(ut.d)(Ht);case 5:return n.delegateYield(t(),"t0",6);case 6:case"end":return n.stop()}},Bt)}var qt={editor:ot.a.mark(function e(){return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.b)(Ae());case 2:case"end":return e.stop()}},e)}),yourStories:ot.a.mark(function e(){return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.b)(ee());case 2:case"end":return e.stop()}},e)}),story:ot.a.mark(function e(){return ot.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.b)(V("story"));case 2:case"end":return e.stop()}},e)})};function Ft(e){var t,n,r;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(ut.c)();case 3:if(n=a.sent,!(r=qt[t])){a.next=8;break}return a.next=8,r(n);case 8:case"end":return a.stop()}},zt)}function Yt(){var e,t,n,r,a;return ot.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(ut.c)();case 2:if(e=c.sent,"editor"!==e.navigation.page){c.next=15;break}return c.next=7,Object(ut.c)();case 7:if(t=c.sent,n=t.editor,r=n.lastSave,a=n.lastEdit,!(!n.saving&&a&&a>r&&Date.now()-r>Me)){c.next=15;break}return c.next=15,Object(ut.b)(fe());case 15:case"end":return c.stop()}},Kt)}var Vt=n(210),Xt=function(e,t){return ot.a.mark(function n(r){var a,c,i,o,u;return ot.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.payload,c=a.values,i=a.reject,n.prev=1,n.next=4,Object(ut.a)(ht,e,c);case 4:return o=n.sent,n.next=7,Object(ut.b)(z(o));case 7:return n.next=9,Object(ut.b)(Ie());case 9:return n.next=11,Object(ut.b)(D(t));case 11:n.next=19;break;case 13:return n.prev=13,n.t0=n.catch(1),n.t0.status,u=n.t0.message,n.next=19,Object(ut.a)(i,new Vt.a(u));case 19:case"end":return n.stop()}},n,null,[[1,13]])})},Qt=Xt(xt,"stories"),Zt=Xt(kt,"stories"),$t=ot.a.mark(rn),en=ot.a.mark(an),tn=ot.a.mark(cn),nn=ot.a.mark(on);function rn(){var e,t,n,r,a;return ot.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(ut.c)();case 2:return e=c.sent,t=e.editor,n=t.title,r=t.content,a=t.tags,c.abrupt("return",{title:n,content:JSON.stringify(r.toJSON()),tags:a});case 8:case"end":return c.stop()}},$t)}function an(){var e,t,n,r,a;return ot.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(ut.c)();case 2:return e=c.sent,t=e.editor.storyId,c.next=6,rn();case 6:if(n=c.sent,t){c.next=16;break}return c.next=10,ft(ht,At,n);case 10:return r=c.sent,a=r.storyId,c.next=14,Object(ut.b)(me(a));case 14:c.next=20;break;case 16:return c.next=18,ft(Ot,Tt(t),n);case 18:return c.next=20,Object(ut.b)(pe());case 20:case"end":return c.stop()}},en)}function cn(){var e,t,n,r;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ut.c)();case 2:if(e=a.sent,t=e.editor,n=t.changesSaved,r=t.storyId,n){a.next=9;break}return a.next=9,an();case 9:return a.next=11,ft(ht,_t(r));case 11:return a.next=13,Object(ut.b)(M(r));case 13:case"end":return a.stop()}},tn)}function on(){var e,t,n,r;return ot.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ut.c)();case 2:return e=a.sent,t=e.editor,n=t.userToShareName,r=t.storyId,a.prev=6,a.next=9,ft(ht,Rt(r),{username:n});case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(6),console.info("fail to share: ",a.t0);case 14:case"end":return a.stop()}},nn,null,[[6,11]])}var un=ot.a.mark(fn),sn=ot.a.mark(dn),ln=ot.a.mark(bn);function fn(e){var t,n,r,a,c,i,o;return ot.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.next=3,Object(ut.c)();case 3:if(n=u.sent,r=n.yourStories,a=n.auth.id,!r[t]){u.next=8;break}return u.abrupt("return");case 8:return c="drafts"===t?Lt:"shared"===t?Nt:It(a),u.next=11,ft(gt,c);case 11:return i=u.sent,o={stories:"shared"===t?i.usersDrafts:i.stories,tab:t},u.next=15,Object(ut.b)($(o));case 15:case"end":return u.stop()}},un)}function dn(e){var t;return ot.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,ft(jt,St,t);case 3:case"end":return n.stop()}},sn)}function bn(e){var t,n,r,a,c,i,o,u;return ot.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,Object(ut.c)();case 3:return n=s.sent,r=n.yourStories,a=r.drafts,c=r.published,i=r.shared,o=r.tab,u=ze({drafts:a,published:c,shared:i}).find(function(e){return e.id===t}),s.next=12,Object(ut.b)(ke(Object(j.a)({},u,{owner:"shared"!==o})));case 12:return s.next=14,Object(ut.b)(D("editor"));case 14:case"end":return s.stop()}},ln)}var pn=ot.a.mark(mn);function mn(){var e,t;return ot.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ut.c)();case 2:return e=n.sent,t=e.navigation.storyId,n.next=6,ft(ht,Pt(t));case 6:case"end":return n.stop()}},pn)}var vn=ot.a.mark(gn);function gn(){var e,t,n,i,p,m,v,g,h,O,j,y,x;return ot.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:e=[[u,s],[r,l],[o,f],[a,d],[c,b]],t=0;case 2:if(!(t<e.length)){k.next=24;break}n=e[t],i=Object(E.a)(n,2),p=i[0],m=i[1],v=Object.entries(p),g=0;case 9:if(!(g<v.length)){k.next=21;break}if(h=v[g],O=Object(E.a)(h,2),j=O[0],y=O[1],!(x=m[j])){k.next=18;break}return k.next=18,Object(ut.f)(y.getType(),x);case 18:g++,k.next=9;break;case 21:t++,k.next=2;break;case 24:case"end":return k.stop()}},vn)}var hn=n(147),On=n(151),jn=n(148),En=n(154),yn=n(14),xn=n(9),kn=n(117),wn=n(15),An=n(118),Sn=function(e,t,n){return Object(y.b)(e,function(e){return Object(L.bindActionCreators)(t,e)})(n)},Tn=(Object(An.curry)(function(e,t,n){return Object(An.setWith)(An.clone,t,n,Object(An.clone)(e))}),function(e,t,n){var r=e[t];return r?r():n()}),_n=function(e){return function(t){t.stopPropagation(),e()}};function In(){var e=Object(yn.a)(["\n  cursor: ",";\n  margin: 10px;\n  text-align: center;\n  font-family: 'Dancing Script', cursive;\n"]);return In=function(){return e},e}var Cn=wn.a.h1(In(),function(e){return e.clickable?"pointer":"default"}),Ln=function(e){var t=e.onClick;return v.a.createElement(Cn,{onClick:t,clickable:Boolean(t)},"Post Me")};function Nn(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return Nn=function(){return e},e}var Pn=Object(wn.a)(xn.t)(Nn()),Rn=Sn(function(e){return e.navbar},Object(j.a)({},i,{to:D,unauthorizeUser:K}),function(e){var t=e.to,n=e.unauthorizeUser,r=e.dropdownOpen,a=e.dropdownAnchor,c=e.toggleDropdown,i=function(e){return function(){c(),e()}};return v.a.createElement(xn.a,{position:"static"},v.a.createElement(Pn,null,v.a.createElement(Ln,{onClick:function(){return t("stories")}}),v.a.createElement("div",null,v.a.createElement(xn.k,{"aria-owns":r?"menu-appbar":null,"aria-haspopup":"true",onClick:function(e){var t=e.currentTarget;return c(t)},color:"inherit"},v.a.createElement(kn.a,null)),v.a.createElement(xn.l,{id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:c},v.a.createElement(xn.m,{onClick:i(n)},"Sign out"),v.a.createElement(xn.m,{onClick:i(function(){return t("editor")})},"New story"),v.a.createElement(xn.m,{onClick:i(function(){return t("yourStories")})},"Stories")))))}),Dn=n(5864),Mn=n(5865),Un=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Bn=function(e){return function(t){return t&&t.length<e?"Length should be more than ".concat(e):void 0}},zn=function(e){return e?void 0:"Required"},Kn=Bn(6),Wn=Bn(4),Gn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Length should be less than ".concat(e);return function(n){return!n||n.length>e?t:void 0}}(40),Hn=function(e){return e&&Un.test(e)?void 0:"Invalid email address"},Jn=function(e,t,n){return function(r){r.preventDefault(),t&&e(function(e){return new Promise(function(t,r){return n({values:e,resolve:t,reject:r})})})(r)}},qn=function(e,t){return Fn(e.form[t])},Fn=function(e){return e&&!e.syncErrors&&!e.pristine},Yn=n(298);function Vn(){var e=Object(yn.a)(["\n  && {\n    margin: 5px 0;\n  }\n"]);return Vn=function(){return e},e}var Xn=Object(wn.a)(function(e){var t=e.input,n=e.label,r=e.meta,a=r.active,c=r.error,i=r.warning,o=Object(Yn.a)(e,["input","label","meta"]),u=a?void 0:c||i,s=Boolean(u&&t.value);return v.a.createElement(xn.s,Object.assign({label:n,error:s,helperText:u&&t.value?u:void 0},t,o))})(Vn()),Qn=n(287),Zn=n.n(Qn),$n=n(140),er=n.n($n),tr=n(288),nr=n(139),rr=n.n(nr),ar=Sn(function(e){return e.generic},{toggleSnackbar:De},function(e){var t=e.snackbarMessage,n=e.toggleSnackbar;return v.a.createElement(xn.p,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:t.length>0,autoHideDuration:3e3,onClose:function(){return n("")},onExited:function(){return n("")},ContentProps:{"aria-describedby":"message-id"},message:v.a.createElement("span",null,t),action:[v.a.createElement(xn.k,{key:"close","aria-label":"Close",color:"inherit",onClick:function(){return n("")}},v.a.createElement(rr.a,null))]})});function cr(){var e=Object(yn.a)(["\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return cr=function(){return e},e}var ir=wn.a.div(cr()),or=function(e){function t(){return Object(dt.a)(this,t),Object(On.a)(this,Object(jn.a)(t).apply(this,arguments))}return Object(En.a)(t,e),Object(hn.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.keyMap,r=e.handlers,a=e.stateReceived,c=e.page,i=e.documentTitle,o=void 0===i?"Post Me":i,u=e.style;return this.page=c,a||Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAIN_API_URL:"https://blogapi20190328025351.azurewebsites.net/api/"}).REACT_APP_MOCK?v.a.createElement(Zn.a,{title:o},w.a.isEmpty(n)?v.a.createElement("div",{style:u},v.a.createElement(ar,null),t):v.a.createElement(tr.HotKeys,{style:u,keyMap:n,handlers:r,focused:!0},v.a.createElement(ar,null),t)):v.a.createElement(ir,null,v.a.createElement(er.a,null))}},{key:"componentDidMount",value:function(){Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAIN_API_URL:"https://blogapi20190328025351.azurewebsites.net/api/"}).REACT_APP_MOCK||this.props.enterPage()}},{key:"componentWillUnmount",value:function(){Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAIN_API_URL:"https://blogapi20190328025351.azurewebsites.net/api/"}).REACT_APP_MOCK||this.props.exitPage(this.page)}}]),t}(v.a.Component),ur=Sn(function(e){return{page:e.navigation.page,stateReceived:e.cache.stateReceived[e.navigation.page]}},{enterPage:Ce,exitPage:Le},or);function sr(){var e=Object(yn.a)(["\n  && {\n    margin-top: 10px;\n  }\n"]);return sr=function(){return e},e}function lr(){var e=Object(yn.a)(["\n  && {\n    margin-top: 20px;\n  }\n"]);return lr=function(){return e},e}function fr(){var e=Object(yn.a)(["\n  width: 320px;\n  padding: 20px;\n"]);return fr=function(){return e},e}function dr(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return dr=function(){return e},e}var br=wn.a.form(dr()),pr=Object(wn.a)(xn.o)(fr()),mr=Object(wn.a)(xn.b)(lr()),vr=Object(wn.a)(xn.b)(sr()),gr=function(e){var t=e.handleSubmit,n=e.enabledSubmit,r=e.onSubmit,a=e.submitText,c=e.onBottomTextClick,i=e.bottomText,o=e.fields;return v.a.createElement(ur,{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},v.a.createElement(pr,null,v.a.createElement(br,{onSubmit:Jn(t,n,r)},v.a.createElement(Ln,null),o,v.a.createElement(mr,{type:"submit",variant:"outlined",disabled:!n},a))),v.a.createElement(vr,{onClick:c,color:"primary",size:"small"},i))},hr=Sn(function(e){return{enabledSubmit:qn(e,"login")}},{to:D,submitLogin:U},Object(Dn.a)({form:"login"})(function(e){var t=e.handleSubmit,n=e.enabledSubmit,r=e.submitLogin,a=e.to,c=[v.a.createElement(Mn.a,{name:"email",key:"email",component:Xn,label:"Email",type:"text",validate:[zn,Hn]}),v.a.createElement(Mn.a,{name:"password",key:"password",component:Xn,label:"Password",type:"password",validate:[zn,Kn,Gn]})];return v.a.createElement(gr,{fields:c,handleSubmit:t,enabledSubmit:n,onSubmit:r,submitText:"Login",onBottomTextClick:function(){return a("register")},bottomText:"Don't have an account? Register"})})),Or=Sn(function(e){return{enabledSubmit:qn(e,"register")}},{to:D,submitRegister:B},Object(Dn.a)({form:"register"})(function(e){var t=e.handleSubmit,n=e.enabledSubmit,r=e.submitRegister,a=e.to,c=[v.a.createElement(Mn.a,{name:"email",key:"email",component:Xn,label:"Email",type:"text",validate:[zn,Hn]}),v.a.createElement(Mn.a,{name:"username",key:"username",component:Xn,label:"Username",type:"text",validate:[zn,Wn]}),v.a.createElement(Mn.a,{name:"password",key:"password",component:Xn,label:"Password",type:"password",validate:[zn,Kn,Gn]})];return v.a.createElement(gr,{fields:c,handleSubmit:t,enabledSubmit:n,onSubmit:r,submitText:"Register",onBottomTextClick:function(){return a("login")},bottomText:"Already have an account? Login"})}));function jr(){var e=Object(yn.a)(["\n  margin: 40px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return jr=function(){return e},e}var Er=wn.a.div(jr());function yr(){var e=Object(yn.a)(["\n  && {\n    cursor: pointer;\n    width: 480px;\n    margin: 20px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between\n  }\n"]);return yr=function(){return e},e}var xr=Object(wn.a)(xn.c)(yr()),kr=n(292),wr=function(e){var t=Object(kr.a)({},e);return v.a.createElement(xn.f,Object.assign({},t,{style:{margin:10}}))};function Ar(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"]);return Ar=function(){return e},e}var Sr=wn.a.div(Ar()),Tr=function(e){var t=e.title,n=e.dateText,r=e.onClick,a=e.ownerUsername,c=e.tags;return v.a.createElement(xr,{onClick:r},v.a.createElement(xn.e,null,v.a.createElement(xn.u,{style:{marginBottom:16,fontSize:14},color:"textSecondary"},n),v.a.createElement(xn.u,{style:{height:120},variant:"headline",component:"h2"},t),v.a.createElement(Sr,{style:{height:100}},c.map(function(e){return v.a.createElement(wr,{key:e,label:e})})),v.a.createElement(xn.u,{style:{marginBottom:16,fontSize:14}},"written by ",a)))},_r=n(293),Ir=function(e){return _r.DateTime.fromMillis(1e3*e).toLocaleString({month:"long",day:"numeric"})},Cr=Sn(function(e){return e.stories},{toStory:M},function(e){var t=e.stories,n=e.toStory;return v.a.createElement(ur,null,v.a.createElement(Er,null,w.a.sortBy(t,["publishTime"]).reverse().map(function(e,t){var r=Ir(e.publishTime),a="Published on ".concat(r);return v.a.createElement(Tr,{title:e.title,ownerUsername:e.ownerUsername,tags:e.tags,key:t,dateText:a,onClick:function(){return n(e.id)}})})))}),Lr=n(294),Nr=n(47);function Pr(){var e=Object(yn.a)(["\n  && {\n    display: flex;\n    justify-content: center;\n  }\n"]);return Pr=function(){return e},e}function Rr(){var e=Object(yn.a)(["\n  width: 50px;\n  position: fixed;\n  right: 20px;\n  bottom: 20px;\n"]);return Rr=function(){return e},e}var Dr=Object(wn.a)(xn.o)(Rr()),Mr=Object(wn.a)(xn.m)(Pr()),Ur=Sn(function(e){return e.editor},o,function(e){var t=e.toggleEffect,n=e.content,r=e.linkPrompt,a=[[Nr.a,Ue.BOLD],[Nr.e,Ue.ITALIC],[Nr.b,Ue.CODE],[Nr.f,Be.LINK],[Nr.d,Be.IMAGE],[Nr.c,Be.HEADING_ONE],[Nr.c,Be.HEADING_TWO],[Nr.g,Be.NUMBERED_LIST],[Nr.h,Be.BULLETED_LIST],[Nr.i,Be.QUOTE]].map(function(e){var a,c=Object(E.a)(e,2),i=c[0],o=c[1];return v.a.createElement(Mr,{key:o,selected:(a=o,Object.values(Ue).includes(a)?n.activeMarks.some(function(e){return e.type===a}):a===Be.IMAGE?r===Be.IMAGE:a===Be.LINK?n.inlines.some(function(e){return e.type===Be.LINK}):n.blocks.some(function(e){return e.type===a})),onClick:function(){return t(o)}},v.a.createElement(Lr.a,{icon:i,size:o!==Be.HEADING_TWO?"sm":"xs"}))});return v.a.createElement(Dr,null,v.a.createElement(xn.n,{open:!0},a))});function Br(){var e=Object(yn.a)(["\n  width: '100%';\n  display: flex;\n  justify-content: center;\n  margin: 20px;\n"]);return Br=function(){return e},e}var zr=wn.a.div(Br()),Kr=Sn(function(e){return e.editor},o,function(e){var t=e.changeTitle,n=e.title;return v.a.createElement(zr,null,v.a.createElement(xn.s,{style:{width:320},onChange:function(e){var n=e.target.value;return t(n)},value:n,label:"Title"}))}),Wr=Sn(function(e){return e.editor},o,function(e){var t=e.changesSaved,n=e.save;return t?v.a.createElement("p",null,"Saved"):v.a.createElement(xn.b,{variant:"outlined",onClick:n},"Save")}),Gr=Sn(function(e){return e.editor},o,function(e){var t=e.toggleTagsMenu;return v.a.createElement(xn.b,{variant:"contained",color:"primary",onClick:t},"Publish")}),Hr=Sn(function(e){return e.editor},o,function(e){var t=e.toggleShareDialog;return v.a.createElement(xn.b,{variant:"outlined",color:"primary",onClick:t},"Share")}),Jr=n(150),qr=n(92);function Fr(){var e=Object(yn.a)(["\n  font-family: monospace;\n  background: ",";\n  padding: 3px;\n"]);return Fr=function(){return e},e}var Yr=wn.a.code(Fr(),qr.lime[200]),Vr=function(e){var t,n=e.children,r=e.mark.type,a=e.attributes;return Tn((t={},Object(O.a)(t,Ue.BOLD,function(){return v.a.createElement("strong",a,n)}),Object(O.a)(t,Ue.ITALIC,function(){return v.a.createElement("em",a,n)}),Object(O.a)(t,Ue.CODE,function(){return v.a.createElement(Yr,a,n)}),t),r,function(){return null})};function Xr(){var e=Object(yn.a)(["\n  max-width: 100%;\n  max-height: 20em;\n  box-shadow: ",";\n"]);return Xr=function(){return e},e}function Qr(){var e=Object(yn.a)(["\n  padding: 0 40px;\n"]);return Qr=function(){return e},e}function Zr(){var e=Object(yn.a)(["\n  margin: 0 40px;\n"]);return Zr=function(){return e},e}function $r(){var e=Object(yn.a)(["\n  padding: 8px 0;\n"]);return $r=function(){return e},e}function ea(){var e=Object(yn.a)(["\n  padding: 10px 0;\n"]);return ea=function(){return e},e}function ta(){var e=Object(yn.a)(["\n  border-left: 2px solid #ddd;\n  margin-left: 0;\n  margin-right: 0;\n  padding-left: 10px;\n  color: #aaa;\n  font-style: italic;\n"]);return ta=function(){return e},e}var na=wn.a.blockquote(ta()),ra=wn.a.h1(ea()),aa=wn.a.h2($r()),ca=wn.a.ul(Zr()),ia=wn.a.ol(Qr()),oa=wn.a.img(Xr(),function(e){return e.selected?"0 0 0 2px ".concat(qr.purple[200]):"none"}),ua=function(e){var t,n=e.attributes,r=e.children,a=e.node,c=e.isFocused;return Tn((t={},Object(O.a)(t,Be.QUOTE,function(){return v.a.createElement(na,n,r)}),Object(O.a)(t,Be.HEADING_ONE,function(){return v.a.createElement(ra,n,r)}),Object(O.a)(t,Be.HEADING_TWO,function(){return v.a.createElement(aa,n,r)}),Object(O.a)(t,Be.BULLETED_LIST,function(){return v.a.createElement(ca,n,r)}),Object(O.a)(t,Be.NUMBERED_LIST,function(){return v.a.createElement(ia,n,r)}),Object(O.a)(t,Be.LINK,function(){return v.a.createElement("a",Object.assign({},n,{href:a.data.get("href")}),r)}),Object(O.a)(t,Be.IMAGE,function(){return v.a.createElement(oa,Object.assign({src:a.data.get("src"),selected:c},n))}),Object(O.a)(t,"list-item",function(){return v.a.createElement("li",n,r)}),t),a.type,function(){return null})},sa={document:{last:{type:"paragraph"},normalize:function(e,t){var n=t.code,r=t.node;if("last_child_type_invalid"===n){var a=ue.a.create("paragraph");return e.insertNodeByKey(r.key,r.nodes.size,a)}}},blocks:{image:{isVoid:!0}}},la=Sn(function(e){return e.editor},o,function(e){var t=e.content,n=e.changeContent;return v.a.createElement(Jr.a,{style:{paddingTop:"20px",height:"100%"},autoFocus:!0,placeholder:"Type your story here.",value:t,schema:sa,onChange:function(e){var t=e.value;return n(t)},renderNode:ua,renderMark:Vr})}),fa=n(48),da=n.n(fa),ba=n(91),pa=n.n(ba),ma=n(87),va=n.n(ma),ga=n(88),ha=n.n(ga),Oa=n(89),ja=n.n(Oa),Ea=n(90),ya=n.n(Ea),xa=Sn(function(e){return e.editor},o,function(e){var t=e.changeLink,n=e.exitLinkPrompt,r=e.submitLink;return v.a.createElement(va.a,{open:!0,onClose:n,"aria-labelledby":"form-dialog-link"},v.a.createElement(ya.a,{id:"form-dialog-link"},"Enter the URL"),v.a.createElement(ja.a,null,v.a.createElement(pa.a,{autoFocus:!0,margin:"dense",id:"url",label:"URL",type:"url",style:{minWidth:320},fullWidth:!0,onChange:function(e){var n=e.target.value;return t(n)}})),v.a.createElement(ha.a,null,v.a.createElement(da.a,{onClick:n,color:"primary"},"Cancel"),v.a.createElement(da.a,{onClick:r,color:"primary"},"Submit")))});function ka(){var e=Object(yn.a)(["\n  && {\n    margin: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: center;\n  }\n"]);return ka=function(){return e},e}function wa(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return wa=function(){return e},e}var Aa=wn.a.div(wa()),Sa=Object(wn.a)(xn.o)(ka()),Ta=Sn(function(e){return e.editor},o,function(e){var t=e.editTag,n=e.submitTag,r=e.deleteTag,a=e.tags,c=e.editingTag,i=e.toggleTagsMenu,o=e.publish;return v.a.createElement(xn.g,{open:!0,onClose:i,"aria-labelledby":"form-dialog-tags"},v.a.createElement(xn.j,{id:"form-dialog-tags"},"Add or change tags (up to ",5,") so readers know what your story is about"),v.a.createElement(xn.i,null,a.length<5&&v.a.createElement(Aa,null,v.a.createElement(xn.s,{autoFocus:!0,margin:"dense",label:"Tag",type:"text",fullWidth:!0,value:c,onChange:function(e){var n=e.target.value;return t(n)}}),v.a.createElement(xn.b,{onClick:n,size:"small",variant:"outlined",color:"primary"},"Add")),v.a.createElement(Sa,null,a.map(function(e){return v.a.createElement(wr,{key:e,label:e,onDelete:function(){return r(e)}})}))),v.a.createElement(xn.h,null,v.a.createElement(xn.b,{style:{margin:"auto"},color:"primary",variant:"contained",onClick:o},"Publish")))}),_a=Sn(function(e){return e.editor},o,function(e){var t=e.changeUserToShareName,n=e.toggleShareDialog,r=e.share;return v.a.createElement(va.a,{open:!0,onClose:n,"aria-labelledby":"form-share"},v.a.createElement(ya.a,{id:"form-share"},"Enter username"),v.a.createElement(ja.a,null,v.a.createElement(pa.a,{autoFocus:!0,margin:"dense",id:"share",label:"Username",type:"text",style:{minWidth:320},fullWidth:!0,onChange:function(e){var n=e.target.value;return t(n)}})),v.a.createElement(ha.a,null,v.a.createElement(da.a,{onClick:n,color:"primary"},"Cancel"),v.a.createElement(da.a,{onClick:r,color:"primary"},"Submit")))});function Ia(){var e=Object(yn.a)(["\n  width: 720px;\n"]);return Ia=function(){return e},e}function Ca(){var e=Object(yn.a)(["\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n"]);return Ca=function(){return e},e}var La=wn.a.div(Ca()),Na=wn.a.div(Ia()),Pa=function(e){var t=e.children;return v.a.createElement(La,null,v.a.createElement(Na,null,t))};function Ra(){var e=Object(yn.a)(["\n  width: 20px;\n"]);return Ra=function(){return e},e}function Da(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Da=function(){return e},e}function Ma(){var e=Object(yn.a)(["\n  width: 100%;\n  height: 80px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 ","px;\n"]);return Ma=function(){return e},e}var Ua=wn.a.div(Ma(),50),Ba=wn.a.div(Da()),za=wn.a.div(Ra()),Ka=Sn(function(e){return e.editor},{},function(e){var t=e.linkPrompt,n=e.tagsMenuOpen,r=e.shareDialogOpen,a=e.owner;return v.a.createElement(ur,{style:{padding:"0 ".concat(50,"px")}},v.a.createElement(Ua,null,v.a.createElement(Wr,null),a?v.a.createElement(Ba,null,v.a.createElement(Hr,null),v.a.createElement(za,null),v.a.createElement(Gr,null)):v.a.createElement("div",null)),v.a.createElement(Pa,null,v.a.createElement(Kr,null),v.a.createElement(za,null),v.a.createElement(la,null)),v.a.createElement(Ur,null),t&&v.a.createElement(xa,null),n&&v.a.createElement(Ta,null),r&&v.a.createElement(_a,null))}),Wa=function(e){var t=e.title,n=e.dateText,r=e.onEdit,a=e.onDelete,c=e.onClick;return v.a.createElement(xr,{onClick:c},v.a.createElement(xn.e,null,v.a.createElement(xn.u,{style:{marginBottom:16,fontSize:14},color:"textSecondary"},n),v.a.createElement(xn.u,{variant:"headline",component:"h2"},t)),v.a.createElement(xn.d,null,r&&v.a.createElement(xn.b,{onClick:_n(r),size:"small",variant:"outlined"},"Edit"),a&&v.a.createElement(xn.b,{onClick:_n(a),size:"small",variant:"contained",color:"primary"},"Delete")))};function Ga(){var e=Object(yn.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 20px;\n"]);return Ga=function(){return e},e}var Ha=wn.a.div(Ga()),Ja=Sn(function(e){return e.yourStories},Object(j.a)({},a,{toStory:M}),function(e){var t=e.selectTab,n=e.remove,r=e.drafts,a=e.published,c=e.shared,i=e.tab,o=e.edit,u=e.toStory,s={drafts:r,published:a,shared:c}[i],l=["drafts","published","shared"],f=l.indexOf(i),d=function(e){return v.a.createElement(Er,null,e.map(function(e,t){var r=e["published"===i?"publishTime":"lastEditTime"],a=Ir(r),c="".concat("published"===i?"Published on":"Last edit"," ").concat(a);return v.a.createElement(Wa,{key:t,title:e.title,dateText:c,onEdit:function(){return o(e.id)},onDelete:"shared"!==i?function(){return n(e.id)}:void 0,onClick:function(){return"published"===i?u(e.id):o(e.id)}})}))};return v.a.createElement(ur,null,v.a.createElement(xn.a,{position:"static"},v.a.createElement(xn.r,{value:f,onChange:function(e,n){return t(l[n])}},v.a.createElement(xn.q,{label:"drafts"}),v.a.createElement(xn.q,{label:"published"}),v.a.createElement(xn.q,{label:"shared"}))),s&&("shared"===i?s.map(function(e){var t=e.username,n=e.drafts;return v.a.createElement("div",{key:t},v.a.createElement(Ha,null,v.a.createElement(xn.u,{color:"textSecondary"},t," drafts")),d(n))}):d(s)))});function qa(){var e=Object(yn.a)(["\n  margin-left: 10px;\n"]);return qa=function(){return e},e}function Fa(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return Fa=function(){return e},e}function Ya(){var e=Object(yn.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Ya=function(){return e},e}function Va(){var e=Object(yn.a)(["\n  margin: 20px;\n"]);return Va=function(){return e},e}var Xa=wn.a.div(Va()),Qa=wn.a.div(Ya()),Za=wn.a.div(Fa()),$a=wn.a.p(qa()),ec=Sn(function(e){return Object(j.a)({},e.story,{userId:e.auth.id})},c,function(e){var t=e.title,n=e.content,r=e.publishTime,a=e.ownerUsername,c=e.ownerId,i=e.tags,o=e.userId,u=e.likesNumber,s=e.liked,l=e.toggleLike;return v.a.createElement(ur,null,v.a.createElement(Pa,null,v.a.createElement(Xa,null,v.a.createElement(xn.u,{variant:"subheading",gutterBottom:!0},"author: ",a),v.a.createElement(xn.u,{variant:"body1",gutterBottom:!0},Ir(r))),v.a.createElement(xn.u,{variant:"display2",gutterBottom:!0},t),n&&v.a.createElement(Jr.a,{readOnly:!0,style:{paddingTop:"20px"},value:n,renderNode:ua,renderMark:Vr}),v.a.createElement(Qa,null,i.map(function(e){return v.a.createElement(wr,{label:e,key:e})})),v.a.createElement(Za,null,v.a.createElement(xn.k,{disabled:o===c,onClick:l},s?v.a.createElement(kn.b,{color:"secondary"}):v.a.createElement(kn.c,{color:"secondary"})),v.a.createElement($a,null,u))))}),tc=["stories","editor","yourStories","story"];function nc(){var e=Object(yn.a)(["\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n"]);return nc=function(){return e},e}var rc=wn.a.div(nc()),ac=function(e){function t(){var e,n;Object(dt.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(On.a)(this,(e=Object(jn.a)(t)).call.apply(e,[this].concat(a)))).popstate=function(){},n}return Object(En.a)(t,e),Object(hn.a)(t,[{key:"render",value:function(){var e=this.props.page;if(!e)return"No page was specified";var t=p[e];return v.a.createElement(rc,null,tc.includes(e)&&v.a.createElement(Rn,null),v.a.createElement(t,null))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.moveMouse,n=e.changePageSize;window.addEventListener("popstate",this.popstate),window.addEventListener("resize",function(){return n({width:window.innerWidth,height:window.innerHeight})}),document.addEventListener("mousemove",function(e){var n=e.clientX,r=e.clientY;return t({mouseX:n,mouseY:r})})}}]),t}(v.a.Component),cc=Sn(function(e){return{page:e.navigation.page}},{moveMouse:Ne,changePageSize:Pe,to:D},ac),ic=function(){return v.a.createElement(y.a,{store:ct},v.a.createElement(cc,null))};rt.run(gn),W()&&ct.dispatch(Ie()),Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_MAIN_API_URL:"https://blogapi20190328025351.azurewebsites.net/api/"}).REACT_APP_MOCK&&n.e(3).then(n.bind(null,5867)).then(function(e){var t=ct.getState();ct.dispatch(Ze(Object.entries(t).reduce(function(t,n){var r=Object(E.a)(n,2),a=r[0],c=r[1];return Object(j.a)({},t,Object(O.a)({},a,Object(j.a)({},c,e.MOCK_STATE[a])))},{})))});var oc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function uc(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}h.a.render(v.a.createElement(ic,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");oc?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):uc(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):uc(e)})}}()}},[[5573,1,2]]]);
//# sourceMappingURL=main.33f5dd23.chunk.js.map